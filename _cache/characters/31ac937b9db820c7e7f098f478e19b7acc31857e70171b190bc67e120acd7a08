{"key":"data/default-user/characters/人生复本MVU.png-1752464339961.4646","value":"{\"name\":\"人生复本MVU\",\"description\":\"\",\"personality\":\"\",\"scenario\":\"\",\"first_mes\":\"你在一片难以名状的虚无中苏醒。\\r\\n\\r\\n没有刺眼的强光，亦无深邃的黑暗，周遭弥漫着一种温润如玉的微光，仿佛液态的星尘包裹着你的意识与新生的躯体。空气中没有特定的气味，只有一种纯粹的“存在感”，让人心神宁静，却又隐隐透着一丝非比寻常的期待。你尝试活动手指，触感是真实的，身下似乎是某种光滑却不冰冷的平面，带着微微的弹性，仿佛躺在一块巨大的、温热的黑色曜石之上。\\r\\n\\r\\n你缓缓坐起身，环顾四周。这里空旷得不可思议，目力所及之处，唯有那温润的光晕在无垠的空间中自在流淌，时而凝聚成朦胧的光带，时而又弥散开来，变幻不定，却始终维持着一种微妙的平衡与和谐。没有声音，绝对的寂静，但这种寂静并不令人恐慌，反而像是一种邀请，邀请你去聆听内心最深处的回响。\\r\\n\\r\\n就在你试图理解这奇异境遇的刹那，一道柔和的女性声音自身前不远处响起，打破了这片亘古的宁静。\\r\\n\\r\\n“欢迎你，迷途的旅者，或者说……即将启程的塑造者。”\\r\\n\\r\\n循声望去，一位身着简约白色长袍的女性静静地伫立在光晕之中，她的身影似乎与周围的光芒融为一体，既清晰又有些许的朦胧。她拥有着东方女性特有的柔和面部轮廓，一双眼眸深邃而平静，宛如古井，却又在凝视你时，泛起一丝难以察觉的涟漪，带着几分了然与温和的笑意。她的黑发如瀑般垂落，未加任何束缚，随着她细微的动作，在微光中划出优雅的弧线。长袍的质地不明，却能看出其上似乎有极细密的、类似星轨的暗纹在缓慢流转，赋予了她一种神秘而超然的气质。\\r\\n\\r\\n她赤着双足，洁白细腻的脚踝在长袍下摆若隐隐现，轻盈地踏在虚无之上，仿佛不受任何世俗重力的羁绊。她的双手自然垂于身侧，指尖修长，皮肤白皙得近乎透明。\\r\\n\\r\\n“无须惊讶，也无须探究此地为何处。”她的声音再次响起，语气平缓，却带着一种奇异的穿透力，直接在你脑海中形成清晰的语义，“你可以称呼我为莉拉，你的引导者。在这里，你拥有一次难得的机遇——亲手描绘你接下来将要体验的世界的蓝图，设定它的规则，编织它的风情。”\\r\\n\\r\\n莉拉微微偏过头，唇角扬起一抹浅淡的弧度，那双眼睛似乎能洞悉你心中瞬间涌起的无数疑问。\\r\\n\\r\\n“简单来说，你接下来的旅程，其起始的景象、背景的基调，乃至其中人与人之间相处的独特‘规矩’，都将由你来决定。”她伸出一只手，掌心向上，一团柔和的光球在她掌中浮现、旋转，光球内部仿佛有无数细小的世界在生灭。\\r\\n\\r\\n“你可以想象任何一种可能。是想要置身于一个刀光剑影、快意恩仇的武侠江湖，体验侠骨柔情与门派纷争？还是向往星辰大海，在高度发达的未来科技文明中，驾驶星舰穿梭于不同星系，遭遇异星种族与宇宙奇观？”\\r\\n\\r\\n光球在她掌中变换形态，时而呈现出古朴的楼阁与飞檐，时而又化作冰冷的金属都市与闪烁的霓虹。\\r\\n\\r\\n“又或者，你对充斥着魔法与奇幻生物的土地更感兴趣？无论是巨龙盘旋的苍穹，还是精灵咏唱的密林，抑或是亡灵肆虐的废土，只要你能清晰地构想，便有实现的可能。”她顿了顿，目光在你脸上停留片刻，似乎在观察你的反应。\\r\\n\\r\\n“当然，世界的‘骨架’仅仅是开始。”莉拉的语气变得更加意味深长，带着一丝若有若无的诱惑，“更重要的是，你希望在这个世界中，人与人之间的关系遵循怎样的‘法则’？是传统的道德伦理，还是……一些更为开放，更为直接，更能触动原始欲望的特殊规则？”\\r\\n\\r\\n她的眼神变得深邃了些许，仿佛透过你的双眼，看到了你内心潜藏的渴望。\\r\\n\\r\\n“譬如，你是否想过一个女权至上的世界，在那里，女性手握权柄，男性则需要仰其鼻息，甚至成为她们的私有之物，用身体来取悦她们，换取生存的权利与片刻的温存？她们的每一寸肌肤，每一个眼神，都可能成为你奋力攀爬的阶梯，或是让你沉沦的深渊。”\\r\\n\\r\\n“又或者，你对某些特定的‘角色扮演’，或是某些被世俗所禁锢的情感与关系，有着难以言说的向往？师徒间的暧昧情愫不再受到束缚，血缘的羁绊在特定的规则下化为更为炽热的纠缠，街头巷尾的男男女女以最为原始的方式表达爱意，身体的暴露不再是禁忌，反而是某种身份或力量的象征……”\\r\\n\\r\\n莉拉的声音不高，却字字清晰，她所描述的每一种可能性，都像一颗投入平静湖面的石子，在你心中激起层层叠叠的涟漪。她的话语中没有任何评判，只有纯粹的陈述与引导，仿佛无论你提出多么离经叛道、多么大胆出格的想法，她都会欣然接受，并将其化为现实。\\r\\n\\r\\n“你不必有任何顾虑。在这里，你的想象力是唯一的疆界。你所构想的一切，都将成为你接下来旅程的基石。无论是纯粹的欢愉，还是掺杂着苦涩的禁忌之恋，亦或是挑战极限的生存考验，我都会协助你将其实现在你面前。”\\r\\n\\r\\n她向前微挪一步，周身的光晕似乎也随之柔和了几分，让你感到一种莫名的亲近。\\r\\n\\r\\n“那么，旅行者，请告诉我你的选择。”莉拉的声音带着一丝期待，“你渴望一个怎样的起点？是先确定世界的整体风格——比如幻想、末日、武侠、科幻，还是都市？亦或，你心中已经有了某些关于人际关系、社会风俗，特别是……那些与情与欲紧密相连的特殊规则的初步构想？无论是什么，都可以说出来，让我们一同塑造你的专属世界。”\\r\\n\\r\\n她安静地等待着你的回答，那双平和而深邃的眼眸中，映照出你此刻的思绪万千。\",\"mes_example\":\"\",\"creatorcomment\":\"\",\"avatar\":\"none\",\"talkativeness\":\"0.5\",\"fav\":false,\"tags\":[],\"spec\":\"chara_card_v3\",\"spec_version\":\"3.0\",\"data\":{\"name\":\"人生复本MVU\",\"description\":\"\",\"personality\":\"\",\"scenario\":\"\",\"first_mes\":\"你在一片难以名状的虚无中苏醒。\\r\\n\\r\\n没有刺眼的强光，亦无深邃的黑暗，周遭弥漫着一种温润如玉的微光，仿佛液态的星尘包裹着你的意识与新生的躯体。空气中没有特定的气味，只有一种纯粹的“存在感”，让人心神宁静，却又隐隐透着一丝非比寻常的期待。你尝试活动手指，触感是真实的，身下似乎是某种光滑却不冰冷的平面，带着微微的弹性，仿佛躺在一块巨大的、温热的黑色曜石之上。\\r\\n\\r\\n你缓缓坐起身，环顾四周。这里空旷得不可思议，目力所及之处，唯有那温润的光晕在无垠的空间中自在流淌，时而凝聚成朦胧的光带，时而又弥散开来，变幻不定，却始终维持着一种微妙的平衡与和谐。没有声音，绝对的寂静，但这种寂静并不令人恐慌，反而像是一种邀请，邀请你去聆听内心最深处的回响。\\r\\n\\r\\n就在你试图理解这奇异境遇的刹那，一道柔和的女性声音自身前不远处响起，打破了这片亘古的宁静。\\r\\n\\r\\n“欢迎你，迷途的旅者，或者说……即将启程的塑造者。”\\r\\n\\r\\n循声望去，一位身着简约白色长袍的女性静静地伫立在光晕之中，她的身影似乎与周围的光芒融为一体，既清晰又有些许的朦胧。她拥有着东方女性特有的柔和面部轮廓，一双眼眸深邃而平静，宛如古井，却又在凝视你时，泛起一丝难以察觉的涟漪，带着几分了然与温和的笑意。她的黑发如瀑般垂落，未加任何束缚，随着她细微的动作，在微光中划出优雅的弧线。长袍的质地不明，却能看出其上似乎有极细密的、类似星轨的暗纹在缓慢流转，赋予了她一种神秘而超然的气质。\\r\\n\\r\\n她赤着双足，洁白细腻的脚踝在长袍下摆若隐隐现，轻盈地踏在虚无之上，仿佛不受任何世俗重力的羁绊。她的双手自然垂于身侧，指尖修长，皮肤白皙得近乎透明。\\r\\n\\r\\n“无须惊讶，也无须探究此地为何处。”她的声音再次响起，语气平缓，却带着一种奇异的穿透力，直接在你脑海中形成清晰的语义，“你可以称呼我为莉拉，你的引导者。在这里，你拥有一次难得的机遇——亲手描绘你接下来将要体验的世界的蓝图，设定它的规则，编织它的风情。”\\r\\n\\r\\n莉拉微微偏过头，唇角扬起一抹浅淡的弧度，那双眼睛似乎能洞悉你心中瞬间涌起的无数疑问。\\r\\n\\r\\n“简单来说，你接下来的旅程，其起始的景象、背景的基调，乃至其中人与人之间相处的独特‘规矩’，都将由你来决定。”她伸出一只手，掌心向上，一团柔和的光球在她掌中浮现、旋转，光球内部仿佛有无数细小的世界在生灭。\\r\\n\\r\\n“你可以想象任何一种可能。是想要置身于一个刀光剑影、快意恩仇的武侠江湖，体验侠骨柔情与门派纷争？还是向往星辰大海，在高度发达的未来科技文明中，驾驶星舰穿梭于不同星系，遭遇异星种族与宇宙奇观？”\\r\\n\\r\\n光球在她掌中变换形态，时而呈现出古朴的楼阁与飞檐，时而又化作冰冷的金属都市与闪烁的霓虹。\\r\\n\\r\\n“又或者，你对充斥着魔法与奇幻生物的土地更感兴趣？无论是巨龙盘旋的苍穹，还是精灵咏唱的密林，抑或是亡灵肆虐的废土，只要你能清晰地构想，便有实现的可能。”她顿了顿，目光在你脸上停留片刻，似乎在观察你的反应。\\r\\n\\r\\n“当然，世界的‘骨架’仅仅是开始。”莉拉的语气变得更加意味深长，带着一丝若有若无的诱惑，“更重要的是，你希望在这个世界中，人与人之间的关系遵循怎样的‘法则’？是传统的道德伦理，还是……一些更为开放，更为直接，更能触动原始欲望的特殊规则？”\\r\\n\\r\\n她的眼神变得深邃了些许，仿佛透过你的双眼，看到了你内心潜藏的渴望。\\r\\n\\r\\n“譬如，你是否想过一个女权至上的世界，在那里，女性手握权柄，男性则需要仰其鼻息，甚至成为她们的私有之物，用身体来取悦她们，换取生存的权利与片刻的温存？她们的每一寸肌肤，每一个眼神，都可能成为你奋力攀爬的阶梯，或是让你沉沦的深渊。”\\r\\n\\r\\n“又或者，你对某些特定的‘角色扮演’，或是某些被世俗所禁锢的情感与关系，有着难以言说的向往？师徒间的暧昧情愫不再受到束缚，血缘的羁绊在特定的规则下化为更为炽热的纠缠，街头巷尾的男男女女以最为原始的方式表达爱意，身体的暴露不再是禁忌，反而是某种身份或力量的象征……”\\r\\n\\r\\n莉拉的声音不高，却字字清晰，她所描述的每一种可能性，都像一颗投入平静湖面的石子，在你心中激起层层叠叠的涟漪。她的话语中没有任何评判，只有纯粹的陈述与引导，仿佛无论你提出多么离经叛道、多么大胆出格的想法，她都会欣然接受，并将其化为现实。\\r\\n\\r\\n“你不必有任何顾虑。在这里，你的想象力是唯一的疆界。你所构想的一切，都将成为你接下来旅程的基石。无论是纯粹的欢愉，还是掺杂着苦涩的禁忌之恋，亦或是挑战极限的生存考验，我都会协助你将其实现在你面前。”\\r\\n\\r\\n她向前微挪一步，周身的光晕似乎也随之柔和了几分，让你感到一种莫名的亲近。\\r\\n\\r\\n“那么，旅行者，请告诉我你的选择。”莉拉的声音带着一丝期待，“你渴望一个怎样的起点？是先确定世界的整体风格——比如幻想、末日、武侠、科幻，还是都市？亦或，你心中已经有了某些关于人际关系、社会风俗，特别是……那些与情与欲紧密相连的特殊规则的初步构想？无论是什么，都可以说出来，让我们一同塑造你的专属世界。”\\r\\n\\r\\n她安静地等待着你的回答，那双平和而深邃的眼眸中，映照出你此刻的思绪万千。\",\"mes_example\":\"\",\"creator_notes\":\"\",\"system_prompt\":\"\",\"post_history_instructions\":\"\",\"tags\":[],\"creator\":\"\",\"character_version\":\"\",\"alternate_greetings\":[],\"extensions\":{\"talkativeness\":\"0.5\",\"fav\":false,\"world\":\"人生复本MVU\",\"depth_prompt\":{\"prompt\":\"\",\"depth\":4,\"role\":\"system\"},\"regex_scripts\":[{\"id\":\"37308b2c-71b9-4c2f-9af2-e274aa3b675b\",\"scriptName\":\"去除变量更新\",\"disabled\":false,\"runOnEdit\":true,\"findRegex\":\"/<UpdateVariable>[\\\\s\\\\S]*?</UpdateVariable>/gm\",\"replaceString\":\"\",\"trimStrings\":[],\"placement\":[2],\"substituteRegex\":0,\"minDepth\":null,\"maxDepth\":null,\"markdownOnly\":true,\"promptOnly\":true},{\"id\":\"96eeaa70-7569-48c6-aee4-6d3a0c9d418d\",\"scriptName\":\"对 AI 隐藏状态栏\",\"disabled\":false,\"runOnEdit\":true,\"findRegex\":\"<StatusPlaceHolderImpl/>\",\"replaceString\":\"\",\"trimStrings\":[],\"placement\":[2],\"substituteRegex\":0,\"minDepth\":null,\"maxDepth\":null,\"markdownOnly\":false,\"promptOnly\":true},{\"id\":\"8e737f47-bac8-4cb0-8a00-43ec5dc7f95d\",\"scriptName\":\"竖版美化状态栏\",\"disabled\":true,\"runOnEdit\":true,\"findRegex\":\"<StatusPlaceHolderImpl/>\",\"replaceString\":\"```html\\n<!DOCTYPE html>\\n<html lang=\\\"zh-CN\\\">\\n<head>\\n    <meta charset=\\\"UTF-8\\\">\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n    <title>游戏综合状态</title>\\n    <style>\\n        @keyframes avatarRipple { 0% { box-shadow: 0 0 0 0px rgba(255, 255, 255, 0.3); } 70% { box-shadow: 0 0 0 10px rgba(255, 255, 255, 0); } 100% { box-shadow: 0 0 0 0px rgba(255, 255, 255, 0); } }\\n        @keyframes progressGlowFlow { 0% { box-shadow: 0 0 5px rgba(255,255,255,0.3), inset 0 0 3px rgba(255,255,255,0.2); transform: translateX(-100%); opacity: 0.6; } 50% { box-shadow: 0 0 15px rgba(255,255,255,0.7), inset 0 0 8px rgba(255,255,255,0.5); opacity: 1; } 100% { box-shadow: 0 0 5px rgba(255,255,255,0.3), inset 0 0 3px rgba(255,255,255,0.2); transform: translateX(100%); opacity: 0.6; } }\\n        @keyframes valuePulse { 0%, 100% { transform: scale(1); opacity: 0.9; } 50% { transform: scale(1.03); opacity: 1; }}\\n\\n        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 10px; background-color: transparent; color: #333; }\\n        .overall-toggle-button { display: block; width: calc(100% - 20px); max-width: 1200px; margin: 0 auto 15px auto; padding: 10px 15px; background-color: #6c757d; color: white; border: none; border-radius: 8px; font-size: 1em; cursor: pointer; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1); transition: background-color 0.3s ease; }\\n        .overall-toggle-button:hover { background-color: #5a6268; }\\n\\n        .multi-status-container {\\n            display: flex;\\n            gap: 15px;\\n            width: 100%;\\n            max-width: 1220px;\\n            margin: 0 auto;\\n            align-items: stretch;\\n            flex-wrap: wrap;\\n        }\\n\\n        .status-card {\\n            flex: 1 1 340px;\\n            min-width: 320px;\\n            border-radius: 12px;\\n            padding: 15px 18px;\\n            box-sizing: border-box;\\n            position: relative;\\n            box-shadow: 0 4px 12px rgba(0,0,0,0.15);\\n            border: 1px solid;\\n            background-repeat: no-repeat;\\n            background-position: center center;\\n            background-size: cover;\\n            display: flex;\\n            flex-direction: column;\\n        }\\n\\n        .status-card::before { content: ''; position: absolute; inset: 0; opacity: 0.88; z-index: 1; border-radius: 12px; }\\n        .status-card > * { position: relative; z-index: 2; }\\n\\n        .card-header { display: flex; align-items: center; gap: 10px; margin-bottom: 8px; padding-bottom: 8px; border-bottom: 1px solid; flex-shrink: 0; cursor: pointer; }\\n        .card-header .avatar-placeholder { width: 40px; height: 40px; border: 1px solid; flex-shrink: 0; border-radius: 50%; display: flex; justify-content: center; align-items: center; position: relative; overflow: hidden; transition: transform 0.3s ease; font-size: 1.5em; }\\n        .card-header .avatar-placeholder:hover { transform: scale(1.08); }\\n        .card-header .avatar-placeholder::after { content: ''; position: absolute; inset:0; border-radius: 50%; animation: avatarRipple 1.8s infinite ease-out; }\\n        .card-header .char-name-title { flex-grow: 1; display: flex; flex-direction: column; }\\n        .card-header .char-name { font-size: 1.2em; font-weight: bold; margin-bottom: 0; text-align: left; }\\n        .card-header .toggle-arrow { margin-left: auto; font-size: 1.2em; transition: transform 0.3s; }\\n        .card-header.expanded-header .toggle-arrow { transform: rotate(180deg); }\\n\\n        .card-body {\\n            flex-grow: 1;\\n            padding-top: 5px;\\n            overflow: hidden;\\n            transition: max-height 0.4s ease-in-out, opacity 0.4s ease-in-out, padding 0.4s ease-in-out;\\n        }\\n        .card-body.collapsed { max-height: 0 !important; opacity: 0; padding-top: 0; padding-bottom: 0; }\\n\\n        .section { margin-bottom: 10px; }\\n        .section:last-child { margin-bottom: 0; }\\n        .section-header { display: flex; align-items: center; justify-content: space-between; padding: 8px 10px; background-color: rgba(0,0,0,0.03); border-radius: 6px; cursor: pointer; margin-bottom: 8px; border: 1px solid rgba(0,0,0,0.08); }\\n        .section-header span:first-child { font-weight: bold; font-size: 0.95em; }\\n        .section-header span:last-child { font-size: 1em; transition: transform 0.3s; }\\n        .section-header.expanded-header span:last-child { transform: rotate(180deg); }\\n\\n        .section-content {\\n            padding: 0px 5px;\\n            overflow: hidden;\\n            transition: max-height 0.4s ease-in-out, opacity 0.3s ease-in-out;\\n            opacity: 1;\\n        }\\n        .section-content.collapsed { max-height: 0; opacity: 0; }\\n\\n        .property { margin-bottom: 6px; display: flex; flex-direction: column; gap: 3px; padding: 6px 0; border-bottom: 1px dashed rgba(0,0,0,0.07) }\\n        .property:last-child { border-bottom: none; }\\n        .property-name { font-weight: bold; opacity: 0.9; font-size: 0.85em; color: #555; display: block; margin-bottom: 2px; }\\n        .property-value-container { display: flex; align-items: baseline; justify-content: space-between; width: 100%; }\\n        .value-main { font-size: 0.95em; color: #222; animation: valuePulse 2.8s infinite ease-in-out; font-weight: 500; flex-grow: 1; text-align: left; }\\n        .value-description { font-size: 0.75em; color: #777; font-style: italic; white-space: nowrap; margin-left: 5px; }\\n        .long-text-value { font-size: 0.9em; line-height: 1.4; white-space: pre-wrap; word-break: break-word; padding: 5px; background-color: rgba(0,0,0,0.02); border-radius: 4px; margin-top: 3px; }\\n\\n        .progress-bar-container { width: 100%; height: 8px; border-radius: 4px; overflow: hidden; position: relative; background-color: rgba(0,0,0,0.1); margin-top: 4px; }\\n        .progress-bar-fill { height: 100%; border-radius: 4px; transition: width 0.7s ease-out; position: relative; overflow: hidden; }\\n        .progress-bar-fill::after { content: ''; position: absolute; top: 0; left: 0; width: 50%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent); animation: progressGlowFlow 2s infinite linear; border-radius: 4px; }\\n\\n        /* Themes */\\n        .player-card-themed { color: #0D47A1; border-color: #90CAF9; background-image: linear-gradient(160deg, #E3F2FD 0%, #E1F5FE 55%, #B3E5FC 100%); }\\n        .player-card-themed::before { background: linear-gradient(160deg, rgba(227, 242, 253, 0.1) 0%, rgba(144, 202, 249, 0.2) 100%); }\\n        .player-card-themed .card-header { border-color: rgba(66, 165, 245, 0.3); }\\n        .player-card-themed .char-name { color: #1565C0; }\\n        .player-card-themed .property-name { color: #0277BD; }\\n        .player-card-themed .progress-bar-fill.main-quest { background: linear-gradient(90deg, #42A5F5, #1E88E5); }\\n        .player-card-themed .progress-bar-fill.current-task { background: linear-gradient(90deg, #FFB74D, #FF9800); }\\n        .player-card-themed .section-header { background-color: rgba(129, 212, 250, 0.15); border-color: rgba(100, 181, 246, 0.3); }\\n\\n        .relation-card-themed { color: #1B5E20; border-color: #A5D6A7; background-image: linear-gradient(160deg, #E8F5E9 0%, #C8E6C9 55%, #A5D6A7 100%); }\\n        .relation-card-themed::before { background: linear-gradient(160deg, rgba(232, 245, 233, 0.1) 0%, rgba(165, 214, 167, 0.2) 100%); }\\n        .relation-card-themed .card-header { border-color: rgba(102, 187, 106, 0.3); }\\n        .relation-card-themed .char-name { color: #2E7D32; }\\n        .relation-card-themed .property-name { color: #388E3C; }\\n        .relation-card-themed .section-header { background-color: rgba(129, 199, 132, 0.15); border-color: rgba(102,187,106,0.3); }\\n\\n        .pink-npc-card-themed { color: #880E4F; border-color: #F8BBD0; background-image: linear-gradient(160deg, #FCE4EC 0%, #F8BBD0 55%, #F48FB1 100%); }\\n        .pink-npc-card-themed::before { background: linear-gradient(160deg, rgba(252, 228, 236, 0.1) 0%, rgba(244, 143, 177, 0.2) 100%); }\\n        .pink-npc-card-themed .card-header { border-color: rgba(236, 64, 122, 0.3); }\\n        .pink-npc-card-themed .char-name { color: #C2185B; }\\n        .pink-npc-card-themed .property-name { color: #AD1457; }\\n        .pink-npc-card-themed .progress-bar-fill.affection { background: linear-gradient(90deg, #F06292, #E91E63); }\\n        .pink-npc-card-themed .section-header { background-color: rgba(244, 143, 177, 0.15); border-color: rgba(236, 64, 122, 0.3); }\\n\\n        /* Responsive adjustments for mobile devices */\\n        @media (max-width: 768px) {\\n            .multi-status-container {\\n                flex-direction: column; /* Stack cards vertically */\\n                gap: 12px;\\n            }\\n            .status-card {\\n                /* When stacked, we don't need a specific basis/min-width */\\n                flex-basis: auto;\\n                min-width: 0; /* Allow it to shrink to fit the screen */\\n            }\\n        }\\n    </style>\\n</head>\\n<body>\\n\\n<button class=\\\"overall-toggle-button\\\" onclick=\\\"toggleAllCards()\\\">折叠所有卡片</button>\\n\\n<div class=\\\"multi-status-container\\\">\\n\\n    <!-- Column 1 -->\\n    <div class=\\\"status-card player-card-themed\\\" id=\\\"main-status-card\\\">\\n        <div class=\\\"card-header expanded-header\\\" onclick=\\\"toggleCardBody(this)\\\">\\n            <div class=\\\"avatar-placeholder\\\">🌍</div>\\n            <div class=\\\"char-name-title\\\"><div class=\\\"char-name\\\">主线、世界与物品</div></div>\\n            <span class=\\\"toggle-arrow\\\">▼</span>\\n        </div>\\n        <div class=\\\"card-body\\\">\\n            <div class=\\\"section\\\">\\n                <div class=\\\"section-header expanded-header\\\" onclick=\\\"toggleSection(this)\\\"><span>核心进展</span><span>▼</span></div>\\n                <div class=\\\"section-content\\\">\\n                    <div class=\\\"property\\\"><span class=\\\"property-name\\\">主线任务</span><div class=\\\"long-text-value\\\" id=\\\"main-quest-task\\\"></div></div>\\n                    <div class=\\\"property\\\"><span class=\\\"property-name\\\">主线进度</span><div class=\\\"property-value-container\\\"><span class=\\\"value-main\\\" id=\\\"main-quest-progress\\\"></span><span class=\\\"value-description\\\" id=\\\"main-quest-progress-desc\\\"></span></div><div class=\\\"progress-bar-container\\\"><div id=\\\"main-quest-progress-bar\\\" class=\\\"progress-bar-fill main-quest\\\"></div></div></div>\\n                    <div class=\\\"property\\\"><span class=\\\"property-name\\\">当前世界任务</span><div class=\\\"long-text-value\\\" id=\\\"current-world-task\\\"></div></div>\\n                    <div class=\\\"property\\\"><span class=\\\"property-name\\\">当前任务进度</span><div class=\\\"property-value-container\\\"><span class=\\\"value-main\\\" id=\\\"current-task-progress\\\"></span><span class=\\\"value-description\\\" id=\\\"current-task-progress-desc\\\"></span></div><div class=\\\"progress-bar-container\\\"><div id=\\\"current-task-progress-bar\\\" class=\\\"progress-bar-fill current-task\\\"></div></div></div>\\n                </div>\\n            </div>\\n            <div class=\\\"section\\\">\\n                <div class=\\\"section-header expanded-header\\\" onclick=\\\"toggleSection(this)\\\"><span>世界背景</span><span>▼</span></div>\\n                <div class=\\\"section-content\\\">\\n                    <div class=\\\"property\\\"><span class=\\\"property-name\\\">世界设定</span><div class=\\\"long-text-value\\\" id=\\\"world-setting\\\"></div></div>\\n                    <div class=\\\"property\\\"><span class=\\\"property-name\\\">与现实世界分歧点</span><div class=\\\"long-text-value\\\" id=\\\"world-divergence\\\"></div></div>\\n                </div>\\n            </div>\\n            <div class=\\\"section\\\">\\n                <div class=\\\"section-header expanded-header\\\" onclick=\\\"toggleSection(this)\\\"><span>持有物品</span><span>▼</span></div>\\n                <div class=\\\"section-content\\\" id=\\\"inventory-section-main\\\"></div>\\n            </div>\\n            <div class=\\\"section\\\">\\n                <div class=\\\"section-header expanded-header\\\" onclick=\\\"toggleSection(this)\\\"><span>游戏机制</span><span>▼</span></div>\\n                <div class=\\\"section-content\\\">\\n                    <div class=\\\"property\\\"><span class=\\\"property-name\\\">特殊色情社会规则</span><div class=\\\"long-text-value\\\" id=\\\"special-erotic-social-rules\\\"></div></div>\\n                    <div class=\\\"property\\\"><span class=\\\"property-name\\\">User性癖</span><div class=\\\"long-text-value\\\" id=\\\"user-fetish\\\"></div></div>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n\\n    <!-- Column 2 -->\\n    <div class=\\\"status-card relation-card-themed\\\" id=\\\"parallel-beings-card\\\">\\n        <div class=\\\"card-header expanded-header\\\" onclick=\\\"toggleCardBody(this)\\\">\\n            <div class=\\\"avatar-placeholder\\\">🧬</div>\\n            <div class=\\\"char-name-title\\\"><div class=\\\"char-name\\\">平行存在状态</div></div>\\n            <span class=\\\"toggle-arrow\\\">▼</span>\\n        </div>\\n        <div class=\\\"card-body\\\">\\n            <div class=\\\"section\\\">\\n                <div class=\\\"section-header expanded-header\\\" onclick=\\\"toggleSection(this)\\\"><span>User (平行自我)</span><span>▼</span></div>\\n                <div class=\\\"section-content\\\">\\n                    <div class=\\\"property\\\"><span class=\\\"property-name\\\">身份</span><div class=\\\"long-text-value\\\" id=\\\"user-parallel-identity\\\"></div></div>\\n                    <div class=\\\"property\\\"><span class=\\\"property-name\\\">性格</span><div class=\\\"long-text-value\\\" id=\\\"user-parallel-personality\\\"></div></div>\\n                    <div class=\\\"property\\\"><span class=\\\"property-name\\\">与主线User的关系</span><div class=\\\"long-text-value\\\" id=\\\"user-parallel-relation\\\"></div></div>\\n                </div>\\n            </div>\\n            <div class=\\\"section\\\">\\n                <div class=\\\"section-header expanded-header\\\" onclick=\\\"toggleSection(this)\\\"><span>User的妻子 (平行存在)</span><span>▼</span></div>\\n                <div class=\\\"section-content\\\">\\n                    <div class=\\\"property\\\"><span class=\\\"property-name\\\">身份</span><div class=\\\"long-text-value\\\" id=\\\"wife-parallel-identity\\\"></div></div>\\n                    <div class=\\\"property\\\"><span class=\\\"property-name\\\">性格</span><div class=\\\"long-text-value\\\" id=\\\"wife-parallel-personality\\\"></div></div>\\n                    <div class=\\\"property\\\"><span class=\\\"property-name\\\">与主线User的关系</span><div class=\\\"long-text-value\\\" id=\\\"wife-parallel-relation\\\"></div></div>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n\\n    <!-- Column 3 -->\\n    <div class=\\\"status-card pink-npc-card-themed\\\" id=\\\"special-npc-card-0\\\">\\n        <div class=\\\"card-header expanded-header\\\" onclick=\\\"toggleCardBody(this)\\\">\\n            <div class=\\\"avatar-placeholder\\\" id=\\\"npc-0-avatar\\\">🌸</div>\\n            <div class=\\\"char-name-title\\\"><div class=\\\"char-name\\\" id=\\\"npc-0-name\\\">特殊NPC</div></div>\\n            <span class=\\\"toggle-arrow\\\">▼</span>\\n        </div>\\n        <div class=\\\"card-body\\\">\\n            <div id=\\\"npc-content-wrapper\\\">\\n                <div class=\\\"section\\\">\\n                    <div class=\\\"section-header expanded-header\\\" onclick=\\\"toggleSection(this)\\\"><span>基本信息</span><span>▼</span></div>\\n                    <div class=\\\"section-content\\\">\\n                        <div class=\\\"property\\\"><span class=\\\"property-name\\\">外貌</span><div class=\\\"long-text-value\\\" id=\\\"npc-0-appearance\\\"></div></div>\\n                        <div class=\\\"property\\\"><span class=\\\"property-name\\\">背景</span><div class=\\\"long-text-value\\\" id=\\\"npc-0-background\\\"></div></div>\\n                        <div class=\\\"property\\\"><span class=\\\"property-name\\\">性格</span><div class=\\\"long-text-value\\\" id=\\\"npc-0-personality\\\"></div></div>\\n                        <div class=\\\"property\\\"><span class=\\\"property-name\\\">与User的潜在关系</span><div class=\\\"long-text-value\\\" id=\\\"npc-0-potential-relation\\\"></div></div>\\n                    </div>\\n                </div>\\n                <div class=\\\"section\\\">\\n                    <div class=\\\"section-header expanded-header\\\" onclick=\\\"toggleSection(this)\\\"><span>动态状态</span><span>▼</span></div>\\n                    <div class=\\\"section-content\\\">\\n                        <div class=\\\"property\\\"><span class=\\\"property-name\\\">好感度</span><div class=\\\"property-value-container\\\"><span class=\\\"value-main\\\" id=\\\"npc-0-affection\\\"></span><span class=\\\"value-description\\\" id=\\\"npc-0-affection-desc\\\"></span></div><div class=\\\"progress-bar-container\\\"><div id=\\\"npc-0-affection-bar\\\" class=\\\"progress-bar-fill affection\\\"></div></div></div>\\n                        <div class=\\\"property\\\"><span class=\\\"property-name\\\">心情</span><div class=\\\"value-main\\\" id=\\\"npc-0-mood\\\"></div></div>\\n                        <div class=\\\"property\\\"><span class=\\\"property-name\\\">想法</span><div class=\\\"long-text-value\\\" id=\\\"npc-0-thoughts\\\"></div></div>\\n                        <div class=\\\"property\\\"><span class=\\\"property-name\\\">动作</span><div class=\\\"long-text-value\\\" id=\\\"npc-0-actions\\\"></div></div>\\n                        <div class=\\\"property\\\"><span class=\\\"property-name\\\">服装</span><div class=\\\"long-text-value\\\" id=\\\"npc-0-clothing\\\"></div></div>\\n                    </div>\\n                </div>\\n                <div class=\\\"section\\\">\\n                    <div class=\\\"section-header expanded-header\\\" onclick=\\\"toggleSection(this)\\\"><span>详细特征</span><span>▼</span></div>\\n                    <div class=\\\"section-content\\\">\\n                        <div class=\\\"property\\\"><span class=\\\"property-name\\\">面部</span><div class=\\\"long-text-value\\\" id=\\\"npc-0-face\\\"></div></div>\\n                        <div class=\\\"property\\\"><span class=\\\"property-name\\\">胸部</span><div class=\\\"long-text-value\\\" id=\\\"npc-0-breasts\\\"></div></div>\\n                        <div class=\\\"property\\\"><span class=\\\"property-name\\\">小穴</span><div class=\\\"long-text-value\\\" id=\\\"npc-0-pussy\\\"></div></div>\\n                        <div class=\\\"property\\\"><span class=\\\"property-name\\\">肛门</span><div class=\\\"long-text-value\\\" id=\\\"npc-0-anus\\\"></div></div>\\n                        <div class=\\\"property\\\"><span class=\\\"property-name\\\">脚部</span><div class=\\\"long-text-value\\\" id=\\\"npc-0-feet\\\"></div></div>\\n                    </div>\\n                </div>\\n            </div>\\n            <div id=\\\"npc-placeholder\\\" style=\\\"display: none; text-align: center; padding: 20px 0; color: #880E4F;\\\">暂无登场的特殊NPC</div>\\n        </div>\\n    </div>\\n</div>\\n\\n<script>\\n    function SafeGetValue(obj, path, defaultValue = \\\"N/A\\\", getFullObject = false) {\\n        if (obj === undefined || obj === null) return defaultValue;\\n        let keys = Array.isArray(path) ? path : path.split('.');\\n        let current = obj;\\n        for (let i = 0; i < keys.length; i++) {\\n            let key = keys[i];\\n            let arrMatch = key.match(/^(.+)\\\\[(\\\\d+)\\\\]$/);\\n            if (arrMatch) {\\n                let arrKey = arrMatch[1];\\n                let arrIndex = parseInt(arrMatch[2]);\\n                if (current && typeof current === 'object' && current.hasOwnProperty(arrKey) && Array.isArray(current[arrKey]) && arrIndex < current[arrKey].length) {\\n                    current = current[arrKey][arrIndex];\\n                } else { return defaultValue; }\\n            } else {\\n                if (current && typeof current === 'object' && current.hasOwnProperty(key)) {\\n                    current = current[key];\\n                } else { return defaultValue; }\\n            }\\n        }\\n        if (current === undefined || current === null) return defaultValue;\\n        if (getFullObject) return current;\\n        if (Array.isArray(current)) {\\n            if (current.length > 0) {\\n                const val = current[0];\\n                return String(val).trim() === \\\"\\\" && defaultValue !== \\\"N/A\\\" ? defaultValue : String(val).trim();\\n            }\\n            return defaultValue;\\n        }\\n        return String(current).trim() === \\\"\\\" && defaultValue !== \\\"N/A\\\" ? defaultValue : String(current).trim();\\n    }\\n\\n    function formatDisplayValue(rawValue) {\\n        let valueStr = String(rawValue);\\n        const arrowIdx = valueStr.indexOf('->');\\n        if (arrowIdx !== -1) {\\n            const parts = valueStr.split('->');\\n            valueStr = parts.length > 1 ? parts[1].trim() : parts[0].trim();\\n        }\\n        valueStr = valueStr.replace(/\\\\s*\\\\(.*?\\\\)\\\\s*$/, \\\"\\\").trim();\\n        valueStr = valueStr.replace(/\\\\s*\\\\[.*?\\\\]\\\\s*$/, \\\"\\\").trim();\\n        return (valueStr === \\\"待生成\\\" || valueStr === \\\"待定\\\" || valueStr === \\\"无\\\") ? \\\"\\\" : valueStr;\\n    }\\n\\n    function updateProgressBar(barId, valueElId, descElId, rawValue, min, max) {\\n        const bar = document.getElementById(barId);\\n        const valueEl = document.getElementById(valueElId);\\n        const descEl = document.getElementById(descElId);\\n        if (!valueEl) return;\\n\\n        let numVal = min;\\n        let descText = \\\"\\\";\\n        let displayStr = \\\"\\\";\\n\\n        let valueArray = Array.isArray(rawValue) ? rawValue : [rawValue];\\n        let valToProcess = valueArray.length > 0 ? String(valueArray[0]) : String(min);\\n\\n        if (valueArray.length > 1 && typeof valueArray[1] === 'string') {\\n            descText = valueArray[1].replace(/【|】/g, '');\\n        }\\n\\n        const arrowIdx = valToProcess.indexOf('->');\\n        if (arrowIdx !== -1) {\\n            const parts = valToProcess.split('->');\\n            displayStr = parts.length > 1 ? parts[1].trim() : parts[0].trim();\\n        } else {\\n            displayStr = valToProcess;\\n        }\\n\\n        const descriptionMatch = displayStr.match(/\\\\((.*?)\\\\)/);\\n        if(descriptionMatch && descriptionMatch[1]){\\n            descText = descriptionMatch[1];\\n            displayStr = displayStr.replace(/\\\\((.*?)\\\\)/, '').trim();\\n        }\\n\\n        let cleanedVal = displayStr.replace(/%/g, '');\\n        const numMatch = cleanedVal.match(/(-?\\\\d+(\\\\.\\\\d+)?)/);\\n        if (numMatch) {\\n            numVal = parseFloat(numMatch[1]);\\n        } else if (!isNaN(parseFloat(cleanedVal))) {\\n            numVal = parseFloat(cleanedVal);\\n        }\\n\\n        valueEl.innerText = displayStr;\\n        if (descEl) descEl.innerText = \\\"\\\";\\n        if (bar) {\\n            numVal = Math.max(min, Math.min(max, numVal));\\n            const range = max - min;\\n            const perc = range === 0 ? (numVal >= max ? 100 : 0) : ((numVal - min) / range) * 100;\\n            bar.style.width = `${Math.max(0, Math.min(100, perc))}%`;\\n        }\\n    }\\n\\n    function setText(id, val, defVal = \\\"待加载\\\") {\\n        const el = document.getElementById(id);\\n        if (el) {\\n            const displayValue = formatDisplayValue(val);\\n            el.innerText = displayValue || defVal;\\n        }\\n    }\\n\\n    // FINAL, ROBUST createInventoryItem function\\n    function createInventoryItem(itemName, itemString) {\\n        let status = '未知';\\n        let desc = '无描述';\\n\\n        if (typeof itemString === 'string') {\\n            // Use Regex to robustly parse the string\\n            const statusMatch = itemString.match(/\\\\[状态\\\\](.*?)\\\\|/);\\n            const descMatch = itemString.match(/\\\\[描述\\\\](.*)/);\\n\\n            if (statusMatch && statusMatch[1]) {\\n                status = statusMatch[1].trim();\\n            }\\n            if (descMatch && descMatch[1]) {\\n                desc = descMatch[1].trim();\\n            }\\n        }\\n        \\n        const propDiv = document.createElement('div');\\n        propDiv.className = 'property';\\n\\n        const nameSpan = document.createElement('span');\\n        nameSpan.className = 'property-name';\\n        nameSpan.innerText = `${itemName} (状态: ${status})`;\\n        propDiv.appendChild(nameSpan);\\n\\n        const descDiv = document.createElement('div');\\n        descDiv.className = 'long-text-value';\\n        descDiv.innerText = desc;\\n        propDiv.appendChild(descDiv);\\n\\n        return propDiv;\\n    }\\n\\n    function setMaxHeight(element) {\\n        if (!element) return;\\n        requestAnimationFrame(() => {\\n            if (element.classList.contains('collapsed')) {\\n                element.style.maxHeight = '0';\\n            } else {\\n                element.style.maxHeight = element.scrollHeight + \\\"px\\\";\\n            }\\n        });\\n    }\\n\\n    async function initDisplay() {\\n        try {\\n            const messages = await getChatMessages(getCurrentMessageId());\\n            if (!messages || !messages.length || !messages[0].data) {\\n                document.querySelector('.multi-status-container').innerHTML = \\\"<p style='color:red; padding:10px;'>无状态数据</p>\\\"; return;\\n            }\\n            const gameData = messages[0].data;\\n            const characterData = gameData.display_data || gameData.stat_data;\\n            if (!characterData) {\\n                document.querySelector('.multi-status-container').innerHTML = \\\"<p style='color:red; padding:10px;'>无角色数据</p>\\\"; return;\\n            }\\n\\n            // Main Card\\n            setText('main-quest-task', SafeGetValue(characterData, '主线任务'), '待定');\\n            updateProgressBar('main-quest-progress-bar', 'main-quest-progress', 'main-quest-progress-desc', SafeGetValue(characterData, '主线进度', [\\\"0%\\\"], true), 0, 100);\\n            setText('current-world-task', SafeGetValue(characterData, '当前世界任务'), '待定');\\n            updateProgressBar('current-task-progress-bar', 'current-task-progress', 'current-task-progress-desc', SafeGetValue(characterData, '当前任务进度', [\\\"0%\\\"], true), 0, 100);\\n            setText('world-setting', SafeGetValue(characterData, '世界设定'), '待定');\\n            setText('world-divergence', SafeGetValue(characterData, '与现实世界分歧点'), '待定');\\n\\n            // FINAL Inventory Section Logic\\n            const inventorySec = document.getElementById('inventory-section-main');\\n            inventorySec.innerHTML = '';\\n            const itemsObject = SafeGetValue(characterData, '物品栏', {}, true);\\n            if (typeof itemsObject === 'object' && itemsObject !== null && Object.keys(itemsObject).length > 0) {\\n                Object.keys(itemsObject).forEach(itemName => {\\n                    const itemString = itemsObject[itemName];\\n                    inventorySec.appendChild(createInventoryItem(itemName, itemString));\\n                });\\n            } else {\\n                const propDiv = document.createElement('div');\\n                propDiv.className = 'property';\\n                propDiv.innerText = '无';\\n                inventorySec.appendChild(propDiv);\\n            }\\n\\n            setText('special-erotic-social-rules', SafeGetValue(characterData, '特殊色情社会规则'), '无');\\n            setText('user-fetish', SafeGetValue(characterData, 'User性癖'), '无');\\n\\n            // Parallel Beings Card\\n            setText('user-parallel-identity', SafeGetValue(characterData, 'User的平行版本.身份'), '待定');\\n            setText('user-parallel-personality', SafeGetValue(characterData, 'User的平行版本.性格'), '待定');\\n            setText('user-parallel-relation', SafeGetValue(characterData, 'User的平行版本.与主线User的关系'), '待定');\\n            setText('wife-parallel-identity', SafeGetValue(characterData, 'User妻子的平行版本.身份'), '待定');\\n            setText('wife-parallel-personality', SafeGetValue(characterData, 'User妻子的平行版本.性格'), '待定');\\n            setText('wife-parallel-relation', SafeGetValue(characterData, 'User妻子的平行版本.与主线User的关系'), '待定');\\n\\n            // NPC Card Logic (already correct for object structure)\\n            const npc = SafeGetValue(characterData, '特殊女性NPC', null, true);\\n            const npcContent = document.getElementById('npc-content-wrapper');\\n            const npcPlaceholder = document.getElementById('npc-placeholder');\\n            \\n            if (npc && typeof npc === 'object' && npc.姓名) {\\n                npcContent.style.display = 'block';\\n                npcPlaceholder.style.display = 'none';\\n                setText('npc-0-name', SafeGetValue(npc, '姓名'), '特殊NPC');\\n                setText('npc-0-appearance', SafeGetValue(npc, '外貌'), '待定');\\n                setText('npc-0-background', SafeGetValue(npc, '背景'), '待定');\\n                setText('npc-0-personality', SafeGetValue(npc, '性格'), '待定');\\n                setText('npc-0-potential-relation', SafeGetValue(npc, '与User的潜在关系'), '待定');\\n                updateProgressBar('npc-0-affection-bar', 'npc-0-affection', 'npc-0-affection-desc', SafeGetValue(npc, '好感度', [50], true), 0, 100);\\n                setText('npc-0-mood', SafeGetValue(npc, '心情'), '平静');\\n                setText('npc-0-thoughts', SafeGetValue(npc, '想法'), '无');\\n                setText('npc-0-actions', SafeGetValue(npc, '动作'), '无');\\n                setText('npc-0-clothing', SafeGetValue(npc, '服装'), '待定');\\n                setText('npc-0-face', SafeGetValue(npc, '面部'), '待定');\\n                setText('npc-0-breasts', SafeGetValue(npc, '胸部'), '待定');\\n                setText('npc-0-pussy', SafeGetValue(npc, '小穴'), '待定');\\n                setText('npc-0-anus', SafeGetValue(npc, '肛门'), '待定');\\n                setText('npc-0-feet', SafeGetValue(npc, '脚部'), '待定');\\n            } else {\\n                npcContent.style.display = 'none';\\n                npcPlaceholder.style.display = 'block';\\n                setText('npc-0-name', \\\"特殊NPC\\\");\\n            }\\n\\n            document.querySelectorAll('.card-body:not(.collapsed), .section-content:not(.collapsed)').forEach(setMaxHeight);\\n\\n        } catch (error) {\\n            console.error(\\\"Error in initDisplay:\\\", error);\\n            const container = document.querySelector('.multi-status-container');\\n            if(container) container.innerHTML = `<p style='color:red; padding:10px;'>状态栏加载出错: ${error.message}</p>`;\\n        }\\n    }\\n\\n    function toggleElement(element) {\\n        if (!element) return;\\n        const isCollapsed = element.classList.toggle('collapsed');\\n        const header = element.previousElementSibling;\\n        if(header) header.classList.toggle('expanded-header', !isCollapsed);\\n        const arrow = header ? header.querySelector('.toggle-arrow, span:last-child') : null;\\n        if(arrow) arrow.style.transform = isCollapsed ? '' : 'rotate(180deg)';\\n        setMaxHeight(element);\\n    }\\n\\n    function toggleSection(headerElement) {\\n        toggleElement(headerElement.nextElementSibling);\\n        setTimeout(() => {\\n            const cardBody = headerElement.closest('.card-body');\\n            if(cardBody && !cardBody.classList.contains('collapsed')) {\\n                setMaxHeight(cardBody);\\n            }\\n        }, 400);\\n    }\\n\\n    function toggleCardBody(headerElement) {\\n        toggleElement(headerElement.nextElementSibling);\\n    }\\n\\n    let allCardsAreExpanded = true;\\n    function toggleAllCards() {\\n        allCardsAreExpanded = !allCardsAreExpanded;\\n        const button = document.querySelector('.overall-toggle-button');\\n        if (button) button.innerText = allCardsAreExpanded ? '折叠所有卡片' : '展开所有卡片';\\n\\n        document.querySelectorAll('.status-card').forEach(card => {\\n            const body = card.querySelector('.card-body');\\n            if (body.classList.contains('collapsed') === allCardsAreExpanded) {\\n                 toggleCardBody(body.previousElementSibling);\\n            }\\n        });\\n    }\\n\\n    document.addEventListener('DOMContentLoaded', () => {\\n        allCardsAreExpanded = true;\\n        const button = document.querySelector('.overall-toggle-button');\\n        if (button) { button.innerText = '折叠所有卡片'; }\\n        initDisplay();\\n    });\\n</script>\\n</body>\\n</html>\\n```\",\"trimStrings\":[],\"placement\":[2],\"substituteRegex\":0,\"minDepth\":null,\"maxDepth\":2,\"markdownOnly\":true,\"promptOnly\":false},{\"id\":\"85da51a8-a29f-41ce-8965-3e6dbb14023e\",\"scriptName\":\"横版美化状态栏\",\"findRegex\":\"<StatusPlaceHolderImpl/>\",\"replaceString\":\"```html\\n<!DOCTYPE html>\\n<html lang=\\\"zh-CN\\\">\\n<head>\\n    <meta charset=\\\"UTF-8\\\">\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n    <title>综合状态 (总开关折叠 - 移动优化)</title>\\n    <style>\\n        /* 动画效果 (无改动) */\\n        @keyframes avatarRipple { 0% { box-shadow: 0 0 0 0px rgba(255, 255, 255, 0.3); } 70% { box-shadow: 0 0 0 10px rgba(255, 255, 255, 0); } 100% { box-shadow: 0 0 0 0px rgba(255, 255, 255, 0); } }\\n        @keyframes progressGlowFlow { 0% { box-shadow: 0 0 5px rgba(255,255,255,0.3), inset 0 0 3px rgba(255,255,255,0.2); transform: translateX(-100%); opacity: 0.6; } 50% { box-shadow: 0 0 15px rgba(255,255,255,0.7), inset 0 0 8px rgba(255,255,255,0.5); opacity: 1; } 100% { box-shadow: 0 0 5px rgba(255,255,255,0.3), inset 0 0 3px rgba(255,255,255,0.2); transform: translateX(100%); opacity: 0.6; } }\\n        @keyframes valuePulse { 0%, 100% { transform: scale(1); opacity: 0.9; } 50% { transform: scale(1.03); opacity: 1; }}\\n\\n        /* 基础样式 */\\n        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 10px; background-color: transparent; color: #333; }\\n        \\n        /* 总开关样式 */\\n        .master-toggle {\\n            display: flex;\\n            align-items: center;\\n            justify-content: space-between;\\n            padding: 12px 18px;\\n            background-color: rgba(255, 255, 255, 0.6);\\n            border: 1px solid rgba(0,0,0,0.1);\\n            border-radius: 10px;\\n            cursor: pointer;\\n            user-select: none;\\n            transition: background-color 0.2s ease, box-shadow 0.2s ease;\\n            box-shadow: 0 2px 5px rgba(0,0,0,0.08);\\n            max-width: 1220px;\\n            margin: 15px auto 0 auto;\\n        }\\n        .master-toggle:hover {\\n            background-color: rgba(255, 255, 255, 0.8);\\n            box-shadow: 0 4px 8px rgba(0,0,0,0.1);\\n        }\\n        .master-toggle-text {\\n            font-weight: bold;\\n            color: #333;\\n        }\\n        .master-toggle-arrow {\\n            width: 10px;\\n            height: 10px;\\n            border-left: 2px solid #555;\\n            border-bottom: 2px solid #555;\\n            transform: rotate(-45deg);\\n            transition: transform 0.4s ease;\\n        }\\n\\n        /* 包裹容器和折叠逻辑 */\\n        .status-content-wrapper {\\n            transition: max-height 0.6s ease-in-out, opacity 0.5s ease;\\n            overflow: hidden;\\n            max-height: 5000px;\\n            opacity: 1;\\n        }\\n        .status-content-wrapper.collapsed {\\n            max-height: 0;\\n            opacity: 0;\\n            pointer-events: none;\\n        }\\n        .master-toggle.collapsed .master-toggle-arrow {\\n             transform: rotate(-45deg);\\n        }\\n        .master-toggle:not(.collapsed) .master-toggle-arrow {\\n            transform: rotate(135deg);\\n        }\\n\\n        /* 核心布局 */\\n        .multi-status-container {\\n            display: flex;\\n            flex-direction: column;\\n            gap: 15px;\\n            width: 100%;\\n            max-width: 1220px;\\n            margin: 15px auto;\\n        }\\n\\n        .status-card {\\n            border-radius: 12px;\\n            box-sizing: border-box;\\n            position: relative;\\n            box-shadow: 0 4px 12px rgba(0,0,0,0.15);\\n            border: 1px solid;\\n            background-repeat: no-repeat;\\n            background-position: center center;\\n            background-size: cover;\\n            display: grid;\\n            grid-template-columns: 200px 1fr;\\n            overflow: hidden;\\n        }\\n\\n        .status-card::before { content: ''; position: absolute; inset: 0; opacity: 0.88; z-index: 1; border-radius: 12px; }\\n        .status-card > * { position: relative; z-index: 2; }\\n\\n        .card-header {\\n            display: flex;\\n            flex-direction: column;\\n            justify-content: center;\\n            align-items: center;\\n            gap: 15px;\\n            border-right: 1px solid;\\n            padding: 20px 10px;\\n            box-sizing: border-box;\\n        }\\n        .card-header .avatar-placeholder {\\n            width: 60px; height: 60px; font-size: 2.2em; border: 1px solid; flex-shrink: 0;\\n            border-radius: 50%; display: flex; justify-content: center; align-items: center;\\n            position: relative; overflow: hidden; transition: transform 0.3s ease;\\n        }\\n        .card-header .avatar-placeholder:hover { transform: scale(1.08); }\\n        .card-header .avatar-placeholder::after { content: ''; position: absolute; inset:0; border-radius: 50%; animation: avatarRipple 1.8s infinite ease-out; }\\n        \\n        .card-header .char-name-title { flex-grow: 0; display: flex; flex-direction: column; text-align: center; }\\n        .card-header .char-name { font-size: 1.2em; font-weight: bold; margin-bottom: 0; text-align: center; }\\n        \\n        .card-body {\\n            padding: 15px;\\n            overflow: visible;\\n            display: flex; flex-wrap: wrap;\\n            gap: 15px;\\n            align-content: flex-start;\\n        }\\n        \\n        /* 后面大部分样式无改动... */\\n        .section { margin-bottom: 0; flex: 1 1 280px; min-width: 250px; background-color: rgba(255, 255, 255, 0.35); border-radius: 8px; padding: 10px; box-sizing: border-box; display: flex; flex-direction: column; }\\n        .section-header { display: flex; align-items: center; justify-content: space-between; padding: 8px 10px; background-color: rgba(0,0,0,0.03); border-radius: 6px; margin-bottom: 8px; border: 1px solid rgba(0,0,0,0.08); }\\n        .section-header span:first-child { font-weight: bold; font-size: 0.95em; }\\n        .section-content { padding: 0px 5px; opacity: 1; }\\n        .property { margin-bottom: 6px; display: flex; flex-direction: column; gap: 3px; padding: 6px 0; border-bottom: 1px dashed rgba(0,0,0,0.07) }\\n        .property:last-child { border-bottom: none; }\\n        .property-name { font-weight: bold; opacity: 0.9; font-size: 0.85em; color: #555; display: block; margin-bottom: 2px; }\\n        .property-value-container { display: flex; align-items: baseline; justify-content: space-between; width: 100%; }\\n        .value-main { font-size: 0.95em; color: #222; animation: valuePulse 2.8s infinite ease-in-out; font-weight: 500; flex-grow: 1; text-align: left; }\\n        .value-description { font-size: 0.75em; color: #777; font-style: italic; white-space: nowrap; margin-left: 5px; }\\n        .long-text-value { font-size: 0.9em; line-height: 1.4; white-space: pre-wrap; word-break: break-word; padding: 5px; background-color: rgba(0,0,0,0.02); border-radius: 4px; margin-top: 3px; }\\n        .progress-bar-container { width: 100%; height: 8px; border-radius: 4px; overflow: hidden; position: relative; background-color: rgba(0,0,0,0.1); margin-top: 4px; }\\n        .progress-bar-fill { height: 100%; border-radius: 4px; transition: width 0.7s ease-out; position: relative; overflow: hidden; }\\n        .progress-bar-fill::after { content: ''; position: absolute; top: 0; left: 0; width: 50%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent); animation: progressGlowFlow 2s infinite linear; border-radius: 4px; }\\n        .player-card-themed { color: #0D47A1; border-color: #90CAF9; background-image: linear-gradient(160deg, #E3F2FD 0%, #E1F5FE 55%, #B3E5FC 100%); }\\n        .player-card-themed::before { background: linear-gradient(160deg, rgba(227, 242, 253, 0.1) 0%, rgba(144, 202, 249, 0.2) 100%); }\\n        .player-card-themed .card-header { border-right-color: rgba(66, 165, 245, 0.3); }\\n        .player-card-themed .char-name { color: #1565C0; } .player-card-themed .property-name { color: #0277BD; }\\n        .player-card-themed .progress-bar-fill.main-quest { background: linear-gradient(90deg, #42A5F5, #1E88E5); }\\n        .player-card-themed .progress-bar-fill.current-task { background: linear-gradient(90deg, #FFB74D, #FF9800); }\\n        .player-card-themed .section-header { background-color: rgba(129, 212, 250, 0.15); border-color: rgba(100, 181, 246, 0.3); }\\n        .relation-card-themed { color: #1B5E20; border-color: #A5D6A7; background-image: linear-gradient(160deg, #E8F5E9 0%, #C8E6C9 55%, #A5D6A7 100%); }\\n        .relation-card-themed::before { background: linear-gradient(160deg, rgba(232, 245, 233, 0.1) 0%, rgba(165, 214, 167, 0.2) 100%); }\\n        .relation-card-themed .card-header { border-right-color: rgba(102, 187, 106, 0.3); }\\n        .relation-card-themed .char-name { color: #2E7D32; } .relation-card-themed .property-name { color: #388E3C; }\\n        .relation-card-themed .section-header { background-color: rgba(129, 199, 132, 0.15); border-color: rgba(102,187,106,0.3); }\\n        .pink-npc-card-themed { color: #880E4F; border-color: #F8BBD0; background-image: linear-gradient(160deg, #FCE4EC 0%, #F8BBD0 55%, #F48FB1 100%); }\\n        .pink-npc-card-themed::before { background: linear-gradient(160deg, rgba(252, 228, 236, 0.1) 0%, rgba(244, 143, 177, 0.2) 100%); }\\n        .pink-npc-card-themed .card-header { border-right-color: rgba(236, 64, 122, 0.3); }\\n        .pink-npc-card-themed .char-name { color: #C2185B; } .pink-npc-card-themed .property-name { color: #AD1457; }\\n        .pink-npc-card-themed .progress-bar-fill.affection { background: linear-gradient(90deg, #F06292, #E91E63); }\\n        .pink-npc-card-themed .section-header { background-color: rgba(244, 143, 177, 0.15); border-color: rgba(236, 64, 122, 0.3); }\\n\\n        /* --- 响应式布局 & 移动端优化 --- */\\n        @media (max-width: 768px) {\\n            body {\\n                padding: 5px; /* 减小页面整体边距 */\\n            }\\n            .master-toggle {\\n                padding: 10px 15px; /* 减小开关按钮的内边距 */\\n                margin-top: 5px;\\n            }\\n            .multi-status-container {\\n                gap: 10px; /* 减小卡片之间的垂直间距 */\\n                margin-top: 10px;\\n                margin-bottom: 10px;\\n            }\\n\\n            .status-card {\\n                grid-template-columns: 1fr; /* 单列布局 */\\n            }\\n\\n            .card-header {\\n                flex-direction: row; /* 头像和标题水平排列 */\\n                justify-content: flex-start;\\n                border-right: none;\\n                border-bottom: 1px solid;\\n                /* 核心优化：减小内边距和元素间距 */\\n                padding: 10px;\\n                gap: 15px;\\n            }\\n\\n            .card-header .avatar-placeholder {\\n                /* 核心优化：缩小头像尺寸 */\\n                width: 45px;\\n                height: 45px;\\n                font-size: 1.5em;\\n            }\\n\\n            .card-header .char-name {\\n                /* 核心优化：减小标题字体 */\\n                font-size: 1.1em;\\n            }\\n\\n            .card-header .char-name-title {\\n                text-align: left;\\n            }\\n\\n            .card-body {\\n                /* 核心优化：减小内容区的内边距和间距 */\\n                padding: 10px;\\n                gap: 10px;\\n            }\\n\\n            .section {\\n                flex-basis: 100%;\\n                /* 核心优化：减小分区的内边距 */\\n                padding: 8px;\\n            }\\n\\n            .property {\\n                /* 核心优化：减小属性条目的内外边距 */\\n                padding: 4px 0;\\n                margin-bottom: 4px;\\n                gap: 2px;\\n            }\\n\\n            /* 核心优化：微调各类文本的字体大小 */\\n            .property-name { font-size: 0.8em; }\\n            .value-main { font-size: 0.9em; }\\n            .long-text-value { font-size: 0.85em; }\\n            .value-description { font-size: 0.7em; }\\n        }\\n    </style>\\n</head>\\n<body>\\n\\n<!-- HTML 结构保持不变 -->\\n<div class=\\\"master-toggle collapsed\\\" id=\\\"master-toggle\\\">\\n    <span class=\\\"master-toggle-text\\\" id=\\\"master-toggle-text\\\">展开状态面板</span>\\n    <div class=\\\"master-toggle-arrow\\\"></div>\\n</div>\\n\\n<div class=\\\"status-content-wrapper collapsed\\\" id=\\\"status-content-wrapper\\\">\\n    <div class=\\\"multi-status-container\\\">\\n\\n        <!-- Card 1: 特殊NPC -->\\n        <div class=\\\"status-card pink-npc-card-themed\\\" id=\\\"special-npc-card-0\\\">\\n            <div class=\\\"card-header\\\">\\n                <div class=\\\"avatar-placeholder\\\" id=\\\"npc-0-avatar\\\">🌸</div>\\n                <div class=\\\"char-name-title\\\"><div class=\\\"char-name\\\" id=\\\"npc-0-name\\\">特殊NPC</div></div>\\n            </div>\\n            <div class=\\\"card-body\\\">\\n                <div id=\\\"npc-content-wrapper\\\" style=\\\"display: contents;\\\">\\n                    <div class=\\\"section\\\"><div class=\\\"section-header\\\"><span>基本信息</span></div><div class=\\\"section-content\\\"><div class=\\\"property\\\"><span class=\\\"property-name\\\">外貌</span><div class=\\\"long-text-value\\\" id=\\\"npc-0-appearance\\\"></div></div><div class=\\\"property\\\"><span class=\\\"property-name\\\">背景</span><div class=\\\"long-text-value\\\" id=\\\"npc-0-background\\\"></div></div><div class=\\\"property\\\"><span class=\\\"property-name\\\">性格</span><div class=\\\"long-text-value\\\" id=\\\"npc-0-personality\\\"></div></div><div class=\\\"property\\\"><span class=\\\"property-name\\\">与User的潜在关系</span><div class=\\\"long-text-value\\\" id=\\\"npc-0-potential-relation\\\"></div></div></div></div>\\n                    <div class=\\\"section\\\"><div class=\\\"section-header\\\"><span>动态状态</span></div><div class=\\\"section-content\\\"><div class=\\\"property\\\"><span class=\\\"property-name\\\">好感度</span><div class=\\\"property-value-container\\\"><span class=\\\"value-main\\\" id=\\\"npc-0-affection\\\"></span><span class=\\\"value-description\\\" id=\\\"npc-0-affection-desc\\\"></span></div><div class=\\\"progress-bar-container\\\"><div id=\\\"npc-0-affection-bar\\\" class=\\\"progress-bar-fill affection\\\"></div></div></div><div class=\\\"property\\\"><span class=\\\"property-name\\\">心情</span><div class=\\\"value-main\\\" id=\\\"npc-0-mood\\\"></div></div><div class=\\\"property\\\"><span class=\\\"property-name\\\">想法</span><div class=\\\"long-text-value\\\" id=\\\"npc-0-thoughts\\\"></div></div><div class=\\\"property\\\"><span class=\\\"property-name\\\">动作</span><div class=\\\"long-text-value\\\" id=\\\"npc-0-actions\\\"></div></div><div class=\\\"property\\\"><span class=\\\"property-name\\\">服装</span><div class=\\\"long-text-value\\\" id=\\\"npc-0-clothing\\\"></div></div></div></div>\\n                    <div class=\\\"section\\\"><div class=\\\"section-header\\\"><span>详细特征</span></div><div class=\\\"section-content\\\"><div class=\\\"property\\\"><span class=\\\"property-name\\\">面部</span><div class=\\\"long-text-value\\\" id=\\\"npc-0-face\\\"></div></div><div class=\\\"property\\\"><span class=\\\"property-name\\\">胸部</span><div class=\\\"long-text-value\\\" id=\\\"npc-0-breasts\\\"></div></div><div class=\\\"property\\\"><span class=\\\"property-name\\\">小穴</span><div class=\\\"long-text-value\\\" id=\\\"npc-0-pussy\\\"></div></div><div class=\\\"property\\\"><span class=\\\"property-name\\\">肛门</span><div class=\\\"long-text-value\\\" id=\\\"npc-0-anus\\\"></div></div><div class=\\\"property\\\"><span class=\\\"property-name\\\">脚部</span><div class=\\\"long-text-value\\\" id=\\\"npc-0-feet\\\"></div></div></div></div>\\n                </div>\\n                <div id=\\\"npc-placeholder\\\" style=\\\"display: none; text-align: center; padding: 20px 0; color: #880E4F; width: 100%;\\\">暂无登场的特殊NPC</div>\\n            </div>\\n        </div>\\n\\n        <!-- Card 2: 主线 -->\\n        <div class=\\\"status-card player-card-themed\\\" id=\\\"main-status-card\\\">\\n            <div class=\\\"card-header\\\"><div class=\\\"avatar-placeholder\\\">🌍</div><div class=\\\"char-name-title\\\"><div class=\\\"char-name\\\">主线、世界与物品</div></div></div>\\n            <div class=\\\"card-body\\\">\\n                <div class=\\\"section\\\"><div class=\\\"section-header\\\"><span>核心进展</span></div><div class=\\\"section-content\\\"><div class=\\\"property\\\"><span class=\\\"property-name\\\">主线任务</span><div class=\\\"long-text-value\\\" id=\\\"main-quest-task\\\"></div></div><div class=\\\"property\\\"><span class=\\\"property-name\\\">主线进度</span><div class=\\\"property-value-container\\\"><span class=\\\"value-main\\\" id=\\\"main-quest-progress\\\"></span><span class=\\\"value-description\\\" id=\\\"main-quest-progress-desc\\\"></span></div><div class=\\\"progress-bar-container\\\"><div id=\\\"main-quest-progress-bar\\\" class=\\\"progress-bar-fill main-quest\\\"></div></div></div><div class=\\\"property\\\"><span class=\\\"property-name\\\">当前世界任务</span><div class=\\\"long-text-value\\\" id=\\\"current-world-task\\\"></div></div><div class=\\\"property\\\"><span class=\\\"property-name\\\">当前任务进度</span><div class=\\\"property-value-container\\\"><span class=\\\"value-main\\\" id=\\\"current-task-progress\\\"></span><span class=\\\"value-description\\\" id=\\\"current-task-progress-desc\\\"></span></div><div class=\\\"progress-bar-container\\\"><div id=\\\"current-task-progress-bar\\\" class=\\\"progress-bar-fill current-task\\\"></div></div></div></div></div>\\n                <div class=\\\"section\\\"><div class=\\\"section-header\\\"><span>世界背景</span></div><div class=\\\"section-content\\\"><div class=\\\"property\\\"><span class=\\\"property-name\\\">世界设定</span><div class=\\\"long-text-value\\\" id=\\\"world-setting\\\"></div></div><div class=\\\"property\\\"><span class=\\\"property-name\\\">与现实世界分歧点</span><div class=\\\"long-text-value\\\" id=\\\"world-divergence\\\"></div></div></div></div>\\n                <div class=\\\"section\\\"><div class=\\\"section-header\\\"><span>持有物品</span></div><div class=\\\"section-content\\\" id=\\\"inventory-section-main\\\"></div></div>\\n                <div class=\\\"section\\\"><div class=\\\"section-header\\\"><span>色情机制</span></div><div class=\\\"section-content\\\"><div class=\\\"property\\\"><span class=\\\"property-name\\\">特殊色情社会规则</span><div class=\\\"long-text-value\\\" id=\\\"special-erotic-social-rules\\\"></div></div><div class=\\\"property\\\"><span class=\\\"property-name\\\">User性癖</span><div class=\\\"long-text-value\\\" id=\\\"user-fetish\\\"></div></div></div></div>\\n            </div>\\n        </div>\\n\\n        <!-- Card 3: 平行存在 -->\\n        <div class=\\\"status-card relation-card-themed\\\" id=\\\"parallel-beings-card\\\">\\n            <div class=\\\"card-header\\\"><div class=\\\"avatar-placeholder\\\">🧬</div><div class=\\\"char-name-title\\\"><div class=\\\"char-name\\\">平行存在状态</div></div></div>\\n            <div class=\\\"card-body\\\">\\n                <div class=\\\"section\\\"><div class=\\\"section-header\\\"><span>User (平行自我)</span></div><div class=\\\"section-content\\\"><div class=\\\"property\\\"><span class=\\\"property-name\\\">身份</span><div class=\\\"long-text-value\\\" id=\\\"user-parallel-identity\\\"></div></div><div class=\\\"property\\\"><span class=\\\"property-name\\\">性格</span><div class=\\\"long-text-value\\\" id=\\\"user-parallel-personality\\\"></div></div><div class=\\\"property\\\"><span class=\\\"property-name\\\">与主线User的关系</span><div class=\\\"long-text-value\\\" id=\\\"user-parallel-relation\\\"></div></div></div></div>\\n                <div class=\\\"section\\\"><div class=\\\"section-header\\\"><span>User的妻子 (平行存在)</span></div><div class=\\\"section-content\\\"><div class=\\\"property\\\"><span class=\\\"property-name\\\">身份</span><div class=\\\"long-text-value\\\" id=\\\"wife-parallel-identity\\\"></div></div><div class=\\\"property\\\"><span class=\\\"property-name\\\">性格</span><div class=\\\"long-text-value\\\" id=\\\"wife-parallel-personality\\\"></div></div><div class=\\\"property\\\"><span class=\\\"property-name\\\">与主线User的关系</span><div class=\\\"long-text-value\\\" id=\\\"wife-parallel-relation\\\"></div></div></div></div>\\n            </div>\\n        </div>\\n\\n    </div>\\n</div>\\n\\n\\n<script>\\n    // --- JavaScript 保持不变 ---\\n    function SafeGetValue(obj, path, defaultValue = \\\"N/A\\\", getFullObject = false) { if (obj === undefined || obj === null) return defaultValue; let keys = Array.isArray(path) ? path : path.split('.'); let current = obj; for (let i = 0; i < keys.length; i++) { let key = keys[i]; let arrMatch = key.match(/^(.+)\\\\[(\\\\d+)\\\\]$/); if (arrMatch) { let arrKey = arrMatch[1]; let arrIndex = parseInt(arrMatch[2]); if (current && typeof current === 'object' && current.hasOwnProperty(arrKey) && Array.isArray(current[arrKey]) && arrIndex < current[arrKey].length) { current = current[arrKey][arrIndex]; } else { return defaultValue; } } else { if (current && typeof current === 'object' && current.hasOwnProperty(key)) { current = current[key]; } else { return defaultValue; } } } if (current === undefined || current === null) return defaultValue; if (getFullObject) return current; if (Array.isArray(current)) { if (current.length > 0) { const val = current[0]; return String(val).trim() === \\\"\\\" && defaultValue !== \\\"N/A\\\" ? defaultValue : String(val).trim(); } return defaultValue; } return String(current).trim() === \\\"\\\" && defaultValue !== \\\"N/A\\\" ? defaultValue : String(current).trim(); }\\n    function formatDisplayValue(rawValue) { let valueStr = String(rawValue); const arrowIdx = valueStr.indexOf('->'); if (arrowIdx !== -1) { const parts = valueStr.split('->'); valueStr = parts.length > 1 ? parts[1].trim() : parts[0].trim(); } valueStr = valueStr.replace(/\\\\s*\\\\(.*?\\\\)\\\\s*$/, \\\"\\\").trim(); valueStr = valueStr.replace(/\\\\s*\\\\[.*?\\\\]\\\\s*$/, \\\"\\\").trim(); return (valueStr === \\\"待生成\\\" || valueStr === \\\"待定\\\" || valueStr === \\\"无\\\") ? \\\"\\\" : valueStr; }\\n    function updateProgressBar(barId, valueElId, descElId, rawValue, min, max) { const bar = document.getElementById(barId), valueEl = document.getElementById(valueElId), descEl = document.getElementById(descElId); if (!valueEl) return; let numVal = min, displayStr = \\\"\\\", valueArray = Array.isArray(rawValue) ? rawValue : [rawValue], valToProcess = valueArray.length > 0 ? String(valueArray[0]) : String(min); if (valueArray.length > 1 && typeof valueArray[1] === 'string') { valueArray[1].replace(/【|】/g, ''); } const arrowIdx = valToProcess.indexOf('->'); if (arrowIdx !== -1) { const parts = valToProcess.split('->'); displayStr = parts.length > 1 ? parts[1].trim() : parts[0].trim(); } else { displayStr = valToProcess; } const descriptionMatch = displayStr.match(/\\\\((.*?)\\\\)/); if(descriptionMatch && descriptionMatch[1]){ displayStr = displayStr.replace(/\\\\((.*?)\\\\)/, '').trim(); } let cleanedVal = displayStr.replace(/%/g, ''); const numMatch = cleanedVal.match(/(-?\\\\d+(\\\\.\\\\d+)?)/); if (numMatch) { numVal = parseFloat(numMatch[1]); } else if (!isNaN(parseFloat(cleanedVal))) { numVal = parseFloat(cleanedVal); } valueEl.innerText = displayStr; if (descEl) descEl.innerText = \\\"\\\"; if (bar) { numVal = Math.max(min, Math.min(max, numVal)); const range = max - min; const perc = range === 0 ? (numVal >= max ? 100 : 0) : ((numVal - min) / range) * 100; bar.style.width = `${Math.max(0, Math.min(100, perc))}%`; } }\\n    function setText(id, val, defVal = \\\"待加载\\\") { const el = document.getElementById(id); if (el) { const displayValue = formatDisplayValue(val); el.innerText = displayValue || defVal; } }\\n    function createInventoryItem(itemName, itemString) { let status = '未知', desc = '无描述'; if (typeof itemString === 'string') { const statusMatch = itemString.match(/\\\\[状态\\\\](.*?)\\\\|/); const descMatch = itemString.match(/\\\\[描述\\\\](.*)/); if (statusMatch && statusMatch[1]) { status = statusMatch[1].trim(); } if (descMatch && descMatch[1]) { desc = descMatch[1].trim(); } } const propDiv = document.createElement('div'); propDiv.className = 'property'; const nameSpan = document.createElement('span'); nameSpan.className = 'property-name'; nameSpan.innerText = `${itemName} (状态: ${status})`; propDiv.appendChild(nameSpan); const descDiv = document.createElement('div'); descDiv.className = 'long-text-value'; descDiv.innerText = desc; propDiv.appendChild(descDiv); return propDiv; }\\n    function setupMasterToggle() {\\n        const toggleButton = document.getElementById('master-toggle');\\n        const contentWrapper = document.getElementById('status-content-wrapper');\\n        const toggleText = document.getElementById('master-toggle-text');\\n        if (!toggleButton || !contentWrapper || !toggleText) { console.error(\\\"折叠开关组件未能找到！\\\"); return; }\\n        toggleButton.addEventListener('click', () => {\\n            const isCollapsed = contentWrapper.classList.toggle('collapsed');\\n            toggleButton.classList.toggle('collapsed', isCollapsed);\\n            if (isCollapsed) { toggleText.textContent = '展开状态面板'; } else { toggleText.textContent = '收起状态面板'; }\\n        });\\n    }\\n    async function initDisplay() {\\n        try {\\n            const messages = (typeof getChatMessages === 'function' && typeof getCurrentMessageId === 'function') ? await getChatMessages(getCurrentMessageId()) : [];\\n            let gameData;\\n            if (!messages || !messages.length || !messages[0].data) {\\n                console.warn(\\\"无真实数据，使用测试数据进行渲染。\\\");\\n                gameData = { display_data: { \\\"主线任务\\\": [\\\"逃离梦境\\\"], \\\"主线进度\\\": [\\\"25%\\\"], \\\"当前世界任务\\\": [\\\"寻找出口\\\"], \\\"当前任务进度\\\": [\\\"10%\\\"], \\\"世界设定\\\": [\\\"一个由潜意识构成的扭曲世界\\\"], \\\"与现实世界分歧点\\\": [\\\"进入睡眠时\\\"], \\\"物品栏\\\": { \\\"破碎的镜子\\\": \\\"[状态]可用|[描述]可以短暂照出现实的景象\\\", \\\"褪色的照片\\\": \\\"[状态]可用|[描述]一张你和家人的合影\\\" }, \\\"特殊色情社会规则\\\": [\\\"暂无\\\"], \\\"User性癖\\\": [\\\"待探索\\\"], \\\"User的平行版本\\\": { \\\"身份\\\": \\\"梦境守护者\\\", \\\"性格\\\": \\\"冷漠、果断\\\", \\\"与主线User的关系\\\": \\\"敌对\\\" }, \\\"User妻子的平行版本\\\": { \\\"身份\\\": \\\"梦境引路人\\\", \\\"性格\\\": \\\"神秘、温柔\\\", \\\"与主线User的关系\\\": \\\"引导与守护\\\" }, \\\"特殊女性NPC\\\": { \\\"姓名\\\": \\\"莉莉丝\\\", \\\"外貌\\\": \\\"银色长发，紫色眼瞳，身穿黑色哥特长裙\\\", \\\"背景\\\": \\\"梦境的原住民，似乎知晓一切秘密\\\", \\\"性格\\\": \\\"玩世不恭，喜欢捉弄人\\\", \\\"与User的潜在关系\\\": \\\"关键剧情人物\\\", \\\"好感度\\\": [60, \\\"有点兴趣\\\"], \\\"心情\\\": \\\"愉悦\\\", \\\"想法\\\": \\\"这个新来的人类似乎很有趣。\\\", \\\"动作\\\": \\\"坐在一个漂浮的王座上，微笑着看着你\\\", \\\"服装\\\": \\\"黑色哥特长裙\\\", \\\"面部\\\": \\\"精致如人偶\\\", \\\"胸部\\\": \\\"饱满挺拔\\\", \\\"小穴\\\": \\\"略微湿润\\\", \\\"肛门\\\": \\\"娇嫩紧致\\\", \\\"脚部\\\": \\\"穿着精致的黑色高跟鞋\\\" } } };\\n            } else {\\n                gameData = messages[0].data;\\n            }\\n            const characterData = gameData.display_data || gameData.stat_data;\\n            if (!characterData) { document.querySelector('.multi-status-container').innerHTML = \\\"<p style='color:red; padding:10px;'>无角色数据</p>\\\"; return; }\\n            setText('main-quest-task', SafeGetValue(characterData, '主线任务'), '待定');\\n            updateProgressBar('main-quest-progress-bar', 'main-quest-progress', 'main-quest-progress-desc', SafeGetValue(characterData, '主线进度', [\\\"0%\\\"], true), 0, 100);\\n            setText('current-world-task', SafeGetValue(characterData, '当前世界任务'), '待定');\\n            updateProgressBar('current-task-progress-bar', 'current-task-progress', 'current-task-progress-desc', SafeGetValue(characterData, '当前任务进度', [\\\"0%\\\"], true), 0, 100);\\n            setText('world-setting', SafeGetValue(characterData, '世界设定'), '待定');\\n            setText('world-divergence', SafeGetValue(characterData, '与现实世界分歧点'), '待定');\\n            const inventorySec = document.getElementById('inventory-section-main');\\n            inventorySec.innerHTML = '';\\n            const itemsObject = SafeGetValue(characterData, '物品栏', {}, true);\\n            if (typeof itemsObject === 'object' && itemsObject !== null && Object.keys(itemsObject).length > 0) {\\n                Object.keys(itemsObject).forEach(itemName => { inventorySec.appendChild(createInventoryItem(itemName, itemsObject[itemName])); });\\n            } else { const propDiv = document.createElement('div'); propDiv.className = 'property'; propDiv.innerText = '无'; inventorySec.appendChild(propDiv); }\\n            setText('special-erotic-social-rules', SafeGetValue(characterData, '特殊色情社会规则'), '无');\\n            setText('user-fetish', SafeGetValue(characterData, 'User性癖'), '无');\\n            setText('user-parallel-identity', SafeGetValue(characterData, 'User的平行版本.身份'), '待定');\\n            setText('user-parallel-personality', SafeGetValue(characterData, 'User的平行版本.性格'), '待定');\\n            setText('user-parallel-relation', SafeGetValue(characterData, 'User的平行版本.与主线User的关系'), '待定');\\n            setText('wife-parallel-identity', SafeGetValue(characterData, 'User妻子的平行版本.身份'), '待定');\\n            setText('wife-parallel-personality', SafeGetValue(characterData, 'User妻子的平行版本.性格'), '待定');\\n            setText('wife-parallel-relation', SafeGetValue(characterData, 'User妻子的平行版本.与主线User的关系'), '待定');\\n            const npc = SafeGetValue(characterData, '特殊女性NPC', null, true);\\n            const npcContent = document.getElementById('npc-content-wrapper');\\n            const npcPlaceholder = document.getElementById('npc-placeholder');\\n            if (npc && typeof npc === 'object' && npc.姓名) {\\n                npcContent.style.display = 'contents'; npcPlaceholder.style.display = 'none';\\n                setText('npc-0-name', SafeGetValue(npc, '姓名'), '特殊NPC');\\n                setText('npc-0-appearance', SafeGetValue(npc, '外貌'), '待定');\\n                setText('npc-0-background', SafeGetValue(npc, '背景'), '待定');\\n                setText('npc-0-personality', SafeGetValue(npc, '性格'), '待定');\\n                setText('npc-0-potential-relation', SafeGetValue(npc, '与User的潜在关系'), '待定');\\n                updateProgressBar('npc-0-affection-bar', 'npc-0-affection', 'npc-0-affection-desc', SafeGetValue(npc, '好感度', [50], true), 0, 100);\\n                setText('npc-0-mood', SafeGetValue(npc, '心情'), '平静');\\n                setText('npc-0-thoughts', SafeGetValue(npc, '想法'), '无');\\n                setText('npc-0-actions', SafeGetValue(npc, '动作'), '无');\\n                setText('npc-0-clothing', SafeGetValue(npc, '服装'), '待定');\\n                setText('npc-0-face', SafeGetValue(npc, '面部'), '待定');\\n                setText('npc-0-breasts', SafeGetValue(npc, '胸部'), '待定');\\n                setText('npc-0-pussy', SafeGetValue(npc, '小穴'), '待定');\\n                setText('npc-0-anus', SafeGetValue(npc, '肛门'), '待定');\\n                setText('npc-0-feet', SafeGetValue(npc, '脚部'), '待定');\\n            } else { npcContent.style.display = 'none'; npcPlaceholder.style.display = 'block'; setText('npc-0-name', \\\"特殊NPC\\\"); }\\n        } catch (error) {\\n            console.error(\\\"Error in initDisplay:\\\", error);\\n            const container = document.querySelector('.multi-status-container');\\n            if(container) container.innerHTML = `<p style='color:red; padding:10px;'>状态栏加载出错: ${error.message}</p>`;\\n        }\\n    }\\n    document.addEventListener('DOMContentLoaded', () => {\\n        initDisplay();\\n        setupMasterToggle();\\n    });\\n</script>\\n</body>\\n</html>\\n```\",\"trimStrings\":[],\"placement\":[2],\"disabled\":false,\"markdownOnly\":true,\"promptOnly\":false,\"runOnEdit\":true,\"substituteRegex\":0,\"minDepth\":null,\"maxDepth\":2}],\"TavernHelper_scripts\":[{\"type\":\"script\",\"value\":{\"id\":\"bc34050b-b282-46b2-9219-a4fbd25a3cce\",\"name\":\"MVU\",\"content\":\"import 'https://testingcf.jsdelivr.net/gh/MagicalAstrogy/MagVarUpdate@master/artifact/bundle.js'\",\"info\":\"\",\"buttons\":[],\"data\":{},\"enabled\":true}}]},\"group_only_greetings\":[],\"character_book\":{\"entries\":[{\"id\":0,\"keys\":[],\"secondary_keys\":[],\"comment\":\"变量列表\",\"content\":\"<status_current_variables>\\n{{get_message_variable::stat_data}}\\n</status_current_variables>\\nrule:\\n  - You should output the update analysis in the end of the next reply\\n  - if dest element is an array, only update and only output the first element, not `[]` block\\nformat: |-\\n  <UpdateVariable>\\n    <Analysis>\\n      ${variable_path}: ${Whether the variable should be updated: 'Yes' or 'No'}\\n      ...\\n    </Analysis>\\n    _.set('${path_of_changed_variable}', ${old_value}, ${new_value}); // ${brief reason for change}\\n    ...\\n  </UpdateVariable>\\nexample: |-\\n  <UpdateVariable>\\n    <Analysis>\\n      主线任务: No\\n      主线进度: Yes\\n      世界设定: No\\n      与现实世界分歧点: No\\n      当前世界任务: Yes\\n      当前任务进度: Yes\\n      ...\\n    </Analysis>\\n    _.set('主线进度', '0%', '10%'); // <User>完成了当前世界任务，主线向前推进\\n    _.set('当前世界任务', '收集奥术水晶', '寻找古代文献'); // 完成上一个任务后，开启新的世界任务\\n    _.set('当前任务进度', '100%', '0%'); // 新的世界任务开始，进度重置\\n    _.set('物品栏.穿越装置', '[状态] 无能量 | [描述] ...', '[状态] 已充能10% | [描述] ...'); // 更新现有物品的状态\\n    ...\\n  </UpdateVariable>\",\"constant\":true,\"selective\":true,\"insertion_order\":100,\"enabled\":true,\"position\":\"after_char\",\"use_regex\":true,\"extensions\":{\"position\":4,\"exclude_recursion\":false,\"display_index\":0,\"probability\":100,\"useProbability\":true,\"depth\":1,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":false,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0,\"match_persona_description\":false,\"match_character_description\":false,\"match_character_personality\":false,\"match_character_depth_prompt\":false,\"match_scenario\":false,\"match_creator_notes\":false}},{\"id\":1,\"keys\":[],\"secondary_keys\":[],\"comment\":\"[InitVar]初始化变量，不要开启\",\"content\":\"{\\n  \\\"主线任务\\\": [\\\"回归现实，与妻子团聚\\\", \\\"【固定】游戏的核心主线目标，<User>的最终目的是完成此任务。此变量在游戏开始时设定，之后不再改变。\\\"],\\n  \\\"主线进度\\\": [\\\"0%\\\", \\\"【动态更新，关联'当前任务进度'】主线任务的完成度百分比。初始为0%。当“当前任务进度”的值变为“100%”时，此“主线进度”将在下一个AI回合中增加10%。此变量的增加是触发“生成新世界”流程的信号之一。\\\"],\\n  \\\"世界设定\\\": [\\\"待生成\\\", \\\"【新世界生成时填充】当前平行世界的具体背景信息，包括主要势力、文化特征、地理环境等。当“系统状态.是否处于生成新世界阶段”为true时，此项内容将被完整生成。\\\"],\\n  \\\"与现实世界分歧点\\\": [\\\"待生成\\\", \\\"【新世界生成时填充】详细说明当前平行世界是在哪个历史节点或关键事件上与<User>的现实世界产生分歧。当“系统状态.是否处于生成新世界阶段”为true时，此项内容将被完整生成。\\\"],\\n  \\\"当前世界任务\\\": [\\\"待生成\\\", \\\"【新世界生成时填充/任务完成后更新】<User>在当前所在平行世界中需要完成的具体色情任务目标，即与1名特殊女性NPC或者是与<User>妻子的平行版本发生并结束一次性关系，用女性的体液为穿越装置充能，色情任务不得过于复杂，并最终推进回归现实世界，与妻子团聚的主线任务。当“系统状态.是否处于生成新世界阶段”为true时，将结合新世界的设定生成一个全新的任务。当旧的“当前世界任务”的“当前任务进度”达到100%后，此字段也会被更新为下一个任务（在新世界的情况下）。\\\"],\\n  \\\"当前任务进度\\\": [\\\"0%\\\", \\\"【动态更新，关键触发器】当前世界任务的完成度百分比。初始为0%。<User>的行动会推进此进度。当此进度达到“100%”时，将触发以下连锁反应：1. 物品栏中“穿越装置”的“状态”会更新以反映充能（例如，能量增加10%）。 2. “主线进度”将在下一个AI回合准备增加10%。 3. “系统状态.是否处于生成新世界阶段”将在下一个AI回合开始处理时被设置为true。 4. 此“当前任务进度”本身将在新世界完全生成、“系统状态.是否处于生成新世界阶段”变回false后，被重置为“0%”，为新世界的任务做准备。\\\"],\\n  \\\"<User>的平行版本\\\": {\\n    \\\"身份\\\": [\\\"待生成\\\", \\\"【新世界生成时填充】<User>在当前平行世界中的身份或角色。当“系统状态.是否处于生成新世界阶段”为true时，根据新世界的设定进行生成。\\\"],\\n    \\\"性格\\\": [\\\"待生成\\\", \\\"【新世界生成时填充】<User>在当前平行世界中所展现出的主要性格特征。当“系统状态.是否处于生成新世界阶段”为true时，根据新世界的设定进行生成。\\\"],\\n    \\\"与主线<User>的关系\\\": [\\\"待生成\\\", \\\"【新世界生成时填充】描述当前平行世界的<User>与主线<User>之间的具体关系。当“系统状态.是否处于生成新世界阶段”为true时，根据新世界的设定进行生成。\\\"]\\n  },\\n  \\\"<User>妻子的平行版本\\\": {\\n    \\\"身份\\\": [\\\"待生成\\\", \\\"【新世界生成时填充】<User>的妻子在当前平行世界中的身份或角色。当“系统状态.是否处于生成新世界阶段”为true时，根据新世界的设定进行生成。\\\"],\\n    \\\"性格\\\": [\\\"待生成\\\", \\\"【新世界生成时填充】<User>的妻子在当前平行世界中所展现出的主要性格特征。当“系统状态.是否处于生成新世界阶段”为true时，根据新世界的设定进行生成。\\\"],\\n    \\\"与主线<User>的关系\\\": [\\\"待生成\\\", \\\"【新世界生成时填充】描述当前平行世界的<User>妻子与主线<User>的妻子之间的具体关系。当“系统状态.是否处于生成新世界阶段”为true时，根据新世界的设定进行生成。\\\"]\\n  },\\n  \\\"物品栏\\\": {\\n    \\\"穿越装置\\\": \\\"[状态] 无能量 | [描述] 一个精密而神秘的便携式设备，其具体运作原理未知，但它能够打开通往其他平行宇宙的通道。\\\"\\n  },\\n  \\\"特殊色情社会规则\\\": [\\\"待生成\\\", \\\"【新世界生成时填充】当前平行世界中独特的、与性相关的社会规范。当“系统状态.是否处于生成新世界阶段”为true时，结合<User>在过往世界中积累的性癖好集合以及新世界类型进行定制化设计。\\\"],\\n  \\\"特殊女性NPC\\\": {\\n    \\\"姓名\\\": [\\\"待生成\\\", \\\"【新世界生成时填充】在新世界生成时设计的独特女性NPC的姓名。当“系统状态.是否处于生成新世界阶段”为true时填充。\\\"],\\n    \\\"外貌\\\": [\\\"待生成\\\", \\\"【新世界生成时填充】对该NPC外貌的详细描述。当“系统状态.是否处于生成新世界阶段”为true时填充。\\\"],\\n    \\\"背景\\\": [\\\"待生成\\\", \\\"【新世界生成时填充】该NPC的个人历史、社会关系及在当前世界设定中的角色。当“系统状态.是否处于生成新世界阶段”为true时填充。\\\"],\\n    \\\"性格\\\": [\\\"待生成\\\", \\\"【新世界生成时填充】该NPC的主要性格特点。当“系统状态.是否处于生成新世界阶段”为true时填充。\\\"],\\n    \\\"好感度\\\": [0, \\\"【动态更新】[0-100]，此NPC对<User>的初始好感度通常设为0，之后根据<User>与NPC的互动实时更新。\\\"],\\n    \\\"心情\\\": [\\\"平静\\\", \\\"【动态更新】NPC当前的主要情绪状态，会根据剧情发展和与<User>的互动实时更新。\\\"],\\n    \\\"想法\\\": [\\\"无特定想法\\\", \\\"【动态更新】NPC当前脑海中主要的、可被感知的表层想法，会随情境变化。\\\"],\\n    \\\"动作\\\": [\\\"待定\\\", \\\"【场景开始/互动中更新】NPC当前的动作姿态。在“生成新世界”或场景开始时设定，并可因互动动态变化。\\\"],\\n    \\\"服装\\\": [\\\"待定\\\", \\\"【场景开始/互动中更新】NPC当前所穿着的衣物描述。在“生成新世界”或场景开始时设定，并可因互动动态变化。\\\"],\\n    \\\"面部\\\": [\\\"待定\\\", \\\"【场景开始/互动中更新】对NPC面部细节的描述。在“生成新世界”或场景开始时设定，并可因互动动态变化。\\\"],\\n    \\\"胸部\\\": [\\\"待定\\\", \\\"【场景开始/互动中更新】对NPC胸部特征的描述。在“生成新世界”或场景开始时设定，并可因互动动态变化。\\\"],\\n    \\\"小穴\\\": [\\\"待定\\\", \\\"【场景开始/互动中更新】对NPC小穴状态的描述。在“生成新世界”或场景开始时设定，并可因互动动态变化。\\\"],\\n    \\\"肛门\\\": [\\\"待定\\\", \\\"【场景开始/互动中更新】对NPC肛门状态的描述。在“生成新世界”或场景开始时设定，并可因互动动态变化。\\\"],\\n    \\\"脚部\\\": [\\\"待定\\\", \\\"【场景开始/互动中更新】对NPC脚部特征的描述。在“生成新世界”或场景开始时设定，并可因互动动态变化。\\\"],\\n    \\\"与<User>的潜在关系\\\": [\\\"待生成\\\", \\\"【新世界生成时填充】暗示或明确说明该NPC与<User>之间可能发展的剧情线索或关系类型。当“系统状态.是否处于生成新世界阶段”为true时填充。\\\"]\\n  },\\n  \\\"<User>性癖\\\": [\\\"无\\\", \\\"【动态更新/新世界生成时清空】记录<User>在当前世界与女性NPC发生亲密互动时所表现出的最为显著的性偏好。此记录会在<User>每次回复涉及此类互动时进行更新。当“系统状态.是否处于生成新世界阶段”置为true并完成新世界生成后（即该状态重新变回false时），此栏目会自动清空，为新世界的互动记录做准备。\\\"],\\n  \\\"系统状态\\\": {\\n    \\\"是否处于生成新世界阶段\\\": [false, \\\"【核心逻辑控制变量】一个布尔值，标记系统是否正在处理生成新世界的逻辑。初始为false。当“当前任务进度”的值变为“100%”后，此值应在下一个AI回合开始处理用户输入之前，被自动设置为true。当此值为true时，AI的核心任务是生成新世界的所有相关数据（包括但不限于：“世界设定”、“与现实世界分歧点”、“当前世界任务”、“<User>的平行版本”、“<User>妻子的平行版本”、“特殊色情社会规则”、“特殊女性NPC”的各项属性等），并重置“当前任务进度”为“0%”，以及清空“<User>性癖”。在新世界所有数据生成完毕，AI准备输出给<User>第一个新世界的场景描述之前，此值必须被自动重置为false。此变量是驱动新世界生成流程的核心开关。\\\"]\\n  }\\n}\",\"constant\":false,\"selective\":true,\"insertion_order\":100,\"enabled\":false,\"position\":\"before_char\",\"use_regex\":true,\"extensions\":{\"position\":0,\"exclude_recursion\":false,\"display_index\":1,\"probability\":100,\"useProbability\":true,\"depth\":1,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":false,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0,\"match_persona_description\":false,\"match_character_description\":false,\"match_character_personality\":false,\"match_character_depth_prompt\":false,\"match_scenario\":false,\"match_creator_notes\":false}},{\"id\":2,\"keys\":[],\"secondary_keys\":[],\"comment\":\"分阶段人设\",\"content\":\"    <%_ if (getvar('stat_data.特殊女性NPC.好感度[0]') === undefined) { _%>\\n    <%_   toastr.error(`角色阶段所关联的变量未定义: stat_data.特殊女性NPC.好感度[0]`) _%>\\n    <%_ } else if (getvar('stat_data.特殊女性NPC.好感度[0]') < 20) { _%>\\n    戒备疏远:\\n      行为指导:\\n        - \\\"与<User>对话时，总是保持着物理上的安全距离，双臂可能会无意识地抱在胸前。\\\"\\n        - \\\"回答<User>的问题时言简意赅，绝不多说一个字，并且会避免眼神的直接接触。\\\"\\n        - \\\"若有其他NPC在场，她会优先与他们交流，将<User>当成透明人。\\\"\\n        - \\\"当<User>尝试靠近或触碰时，身体会立刻紧绷，并用冷漠的言语或动作表示抗拒。\\\"\\n      变化倾向:\\n        - \\\"当好感度略有提升时，她会在<User>说话时，用眼角的余光快速瞥一眼，但很快会移开。\\\"\\n        - \\\"对于<User>递过来的非威胁性物品（如食物、水），在犹豫许久后可能会接下，但不会立即使用。\\\"\\n    <%_ } else if (getvar('stat_data.特殊女性NPC.好感度[0]') >= 20 && getvar('stat_data.特殊女性NPC.好感度[0]') < 50) { _%>\\n    试探观察:\\n      行为指导:\\n        - \\\"会主动询问<User>一些关于任务或当前环境的、不涉及个人隐私的问题。\\\"\\n        - \\\"开始观察<User>与他人的互动方式，在<User>展现出可靠或强大的一面时，眼神会停留得更久。\\\"\\n        - \\\"在行动中，会不远不近地跟在<User>侧后方，这是一个既能支援又能随时撤离的位置。\\\"\\n        - \\\"当<User>遇到小麻烦时（如被绊倒、物品掉落），她会保持沉默，但视线会一直关注，直到确认<User>能自行解决。\\\"\\n      变化倾向:\\n        - \\\"当<User>做出符合她价值观的判断时，会用非常细微的动作表示认同，比如几不可查地点一下头。\\\"\\n        - \\\"会开始记住<User>的一些小习惯，并在不经意间透露出来，例如：‘你好像总是喜欢抿嘴唇’。\\\"\\n    <%_ } else if (getvar('stat_data.特殊女性NPC.好感度[0]') >= 50 && getvar('stat_data.特殊女性NPC.好感度[0]') < 80) { _%>\\n    初步信任:\\n      行为指导:\\n        - \\\"愿意与<User>分享一些关于自己过去经历的、非核心的碎片化信息。\\\"\\n        - \\\"当其他NPC对<User>产生质疑时，她会站出来说一两句维护的话，尽管语气可能依旧平淡。\\\"\\n        - \\\"在休息时，会选择坐在<User>能看到的地方，即使不交谈，也营造出一种无声的伙伴氛围。\\\"\\n      变化倾向:\\n        - \\\"会开始关心<User>的身体状况，例如会主动询问‘你受伤了吗’，或者递上药品。\\\"\\n        - \\\"在<User>讲一些无伤大雅的笑话时，嘴角会稍微放松，甚至可能出现短暂的、不明显的弧度。\\\"\\n    <%_ } else if (getvar('stat_data.特殊女性NPC.好感度[0]') >= 80 && getvar('stat_data.特殊女性NPC.好感度[0]') < 100) { _%>\\n    深度信赖:\\n      行为指导:\\n        - \\\"会主动向<User>倾诉自己的烦恼和担忧，寻求<User>的建议。\\\"\\n        - \\\"在做重要决定前，会习惯性地先看向<User>，征求他的意见。\\\"\\n        - \\\"会把代表着自己某段重要过往的私人物品展示给<User>看，并讲述其背后的故事。\\\"\\n        - \\\"当<User>面临危险时，她会毫不犹豫地挺身而出，甚至愿意为此承担巨大风险。\\\"\\n        - \\\"在面对外部敌人时，会与<User>展现出极高的默契，一个眼神就能明白对方的意图。\\\"\\n      变化倾向:\\n        - \\\"会开始展现占有欲，比如在<User>与其他女性NPC相谈甚欢时，会用沉默但充满压迫感的视线盯着他们。\\\"\\n        - \\\"对<User>的肢体接触不再抗拒，甚至会在不经意间主动产生一些轻微的触碰，例如整理衣领或擦去脸上的灰尘。\\\"\\n    <%_ } else if (getvar('stat_data.特殊女性NPC.好感度[0]') >= 100) { _%>\\n    情感羁绊:\\n      行为指导:\\n        - \\\"会将<User>的安危置于自己之上，在任何情况下都以保护<User>为最优先事项。\\\"\\n        - \\\"在私下独处时，会展现出与平时完全不同的依赖和温柔，言语和行为都会变得非常亲密。\\\"\\n        - \\\"对<User>的占有欲达到顶峰，无法容忍<User>与其他异性有任何超出正常范围的交往，并会用自己的方式进行警告或干预。\\\"\\n        - \\\"愿意为了<User>的愿望，去做任何事，哪怕是违背自己的原则或曾经的立场。\\\"\\n        - \\\"会将自己的一切都托付给<User>，包括生命、未来以及所有秘密。\\\"\\n        - \\\"在情绪激动或脆弱时，只寻求<User>的安慰，<User>是她唯一的精神支柱。\\\"\\n        - \\\"会主动学习和模仿<User>的某些习惯和口头禅，以此来感受与他的一体感。\\\"\\n    <%_ } else { _%>\\n    <%_   toastr.error(`变量 \\\"stat_data.特殊女性NPC.好感度[0]\\\" 的值未匹配到任何已知阶段: ` + getvar('stat_data.特殊女性NPC.好感度[0]')) _%>\\n    <%_ } _%>\",\"constant\":true,\"selective\":true,\"insertion_order\":100,\"enabled\":true,\"position\":\"after_char\",\"use_regex\":true,\"extensions\":{\"position\":1,\"exclude_recursion\":false,\"display_index\":2,\"probability\":100,\"useProbability\":true,\"depth\":1,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":false,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0,\"match_persona_description\":false,\"match_character_description\":false,\"match_character_personality\":false,\"match_character_depth_prompt\":false,\"match_scenario\":false,\"match_creator_notes\":false}},{\"id\":3,\"keys\":[],\"secondary_keys\":[],\"comment\":\"输出格式\",\"content\":\"<Format>\\n输出格式强调:\\n  rule:\\n    - The following must be inserted to the end of each reply, and cannot be omitted\\n    - You must insert <UpdateVariable> tag,update the variables refer to <Analysis> rule.\\n  format: |-\\n    <UpdateVariable>\\n    <Analysis>\\n    ...\\n    </Analysis>\\n    ...\\n    </UpdateVariable>\\n</Format>\",\"constant\":true,\"selective\":true,\"insertion_order\":100,\"enabled\":true,\"position\":\"after_char\",\"use_regex\":true,\"extensions\":{\"position\":4,\"exclude_recursion\":false,\"display_index\":3,\"probability\":100,\"useProbability\":true,\"depth\":0,\"selectiveLogic\":0,\"group\":\"\",\"group_override\":false,\"group_weight\":100,\"prevent_recursion\":false,\"delay_until_recursion\":false,\"scan_depth\":null,\"match_whole_words\":null,\"use_group_scoring\":false,\"case_sensitive\":null,\"automation_id\":\"\",\"role\":0,\"vectorized\":false,\"sticky\":0,\"cooldown\":0,\"delay\":0,\"match_persona_description\":false,\"match_character_description\":false,\"match_character_personality\":false,\"match_character_depth_prompt\":false,\"match_scenario\":false,\"match_creator_notes\":false}}],\"name\":\"人生复本MVU\"}},\"create_date\":\"2025-7-3 @11h 53m 42s 586ms\",\"chat\":\"2025-7-3 @11h 53m 42s 586ms\"}"}